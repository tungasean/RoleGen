function fXTransationWaitingTabTtht(p,a){try{if(!1===p.$parent.IsAuthenticated||!1===p.$parent.IsSplashDone)a.path("/login");else{n=[MsgEntity.TradingDeal,MsgEntity.TradingContract,MsgEntity.Account,MsgEntity.T24SynTransaction,MsgEntity.TradingDealRef,MsgEntity.CustomerSynchronize],$dataManager.regisRealtimeHandler(n,h),p.$on("$destroy",function(){var a;a=[MsgEntity.TradingDeal,MsgEntity.TradingContract,MsgEntity.Account,MsgEntity.T24SynTransaction,MsgEntity.TradingDealRef,MsgEntity.CustomerSynchronize],$dataManager.unregisRealtimeHandler(a,h),p.ModelData=null});var e=p.DetailGoldTransWaitingParam,t=$appUtil.getWin(p);if(p.InfoModelData=t.InfoModelData,p.ModelData={},p.ModelData.TradingDeal=e.ListTradingDeal,p.ModelData.TradingDealRef=e.ListTradingDeal,p.ModelData.TradingDealMemory=e.ListTradingDeal,p.ModelData.TradingContract=e.ListTradingContract,p.ModelData.TradingContractMemory=e.ListTradingContract,p.ModelData.MemberId=p.ModelData.TradingDeal.CustomerId,p.ModelData.TradingDealGoc=e.TradingDealGoc,p.ModelData.TradingDealParent=null,p.ModelData.ButtonAction="",p.ModelData.Account2="",p.ModelData.Account1="",p.ModelData.IsViewMode=!0,p.ModelData.IsViewBtnUpdate=!1,p.ModelData.isFull=!1,p.ModelData.IsStatus=!0,p.ModelData.TM_TaiKhoanTienSource=null,p.ModelData.IsViewPlus2=!1,p.ModelData.IsShowButtonGetButtoan=!1,p.ModelData.IsCheckApprovalBt=!1,p.ModelData.isDongBoLoi=!1,p.ModelData.isErrorVS02=!1,p.ModelData.IsLenhChan2=!1,p.ModelData.NotRecceidT24=!0,p.format=function(a){return $appUtil.numToStr(a,6)},e&&e.IsSwap&&(p.ModelData.IsLenhChan2=!0),p.ModelData.isBuy=!p.ModelData.TradingDeal.IsBuy!=!p.ModelData.IsLenhChan2,p.ModelData.isReadOnlyGhiCo_NgoaiTe=!1,p.ModelData.isReadOnlyGhiNo_NgoaiTe=!1,p.ModelData.isReadOnlyGhiNo_Vnd=!1,p.ModelData.isReadOnlyGhiCo_Vnd=!1,p.ModelData.isReadOnlyGhiNo_NgoaiTe2=!1,p.ModelData.isReadOnlyGhiCo_NgoaiTe2=!1,p.ModelData.isReadOnlyGhiNo_Vnd2=!1,p.ModelData.isReadOnlyGhiCo_Vnd2=!1,p.ModelData.TransactionFXStatus=TransactionFXStatus.UnApproval,p.ModelData.FxBaseSymbolInfo=$operatorManager.getFxBaseSymbolInfo(p.ModelData.TradingDeal.BaseSymbolId),null!=p.ModelData.FxBaseSymbolInfo&&(p.ModelData.Account2=$appScope.translation.lbl_TaiKhoan+" "+p.ModelData.FxBaseSymbolInfo.PosCurrency,p.ModelData.Account1=$appScope.translation.lbl_TaiKhoan+" "+p.ModelData.FxBaseSymbolInfo.Currency),p.ModelData.T24SynTransaction=null,p.ModelData.ListT24SynTransaction=null,p.ModelData.IsT0=!0,p.ModelData.GhiNo_NgoaiTeSelected=null,p.ModelData.GhiCo_NgoaiTeSelected=null,p.ModelData.GhiCo_VndSelected=null,p.ModelData.GhiNo_VndSelected=null,p.ModelData.TradingDeal&&p.ModelData.TradingDeal.SymbolId){var o=$operatorManager.getSymbolInfoById(p.ModelData.TradingDeal.SymbolId);null!=o&&0<o.ValueDay&&(p.ModelData.IsT0=!1)}p.ModelData.IsCkNgoaiNH=!1,p.ModelData.TradingContract.HtBankOrderEnum===BankOrderEnum.CHUYEN_KHOAN&&0<p.ModelData.TradingContract.HtPaymentChannel&&(p.ModelData.IsCkNgoaiNH=!0),p.ModelData.TKNTGhiNoNameUpdate=function(){p.ModelData.TKNTGhiNoName=d(p.ModelData.GhiNo_NgoaiTe)},p.ModelData.TKNTGhiCoNameUpdate=function(){p.ModelData.TKNTGhiCoName=d(p.ModelData.GhiCo_NgoaiTe)},p.ModelData.TKGhiNoNameUpdate=function(){p.ModelData.TKGhiNoName=d(p.ModelData.GhiNo_Vnd)},p.ModelData.TKGhiCoNameUpdate=function(){p.ModelData.TKGhiCoName=d(p.ModelData.GhiCo_Vnd)},p.ModelData.TKNTGhiNoName2Update=function(){p.ModelData.TKNTGhiNoName2=d(p.ModelData.GhiNo_NgoaiTe2)},p.ModelData.TKNTGhiCoName2Update=function(){p.ModelData.TKNTGhiCoName2=d(p.ModelData.GhiCo_NgoaiTe2)},p.ModelData.TKGhiNoName2Update=function(){p.ModelData.TKGhiNoName2=d(p.ModelData.GhiNo_Vnd2)},p.ModelData.TKGhiCoName2Update=function(){p.ModelData.TKGhiCoName2=d(p.ModelData.GhiCo_Vnd2)},p.ModelData.TM_TaiKhoanTienColumns=[{field:"AccountTypeName",headerName:$appScope.translation.Form_Transaction_CK_Out_Account},{field:"DisplayAccount",headerName:$appScope.translation.Form_OrderDetail_AppSoTK},{field:"DisplayAccountName",headerName:$appScope.translation.Form_OrderDetail_AccountName,cellRenderer:function(a){return $appUtil.getAccountName(a.data)}}],p.ModelData.Find_GhiNo_NgoaiTe=function(e){null==e&&(e=!1);var a=u(p.ModelData.TradingDeal.IsBuy,!0,!1,e);(p.ModelData.TM_TaiKhoanTienSource=c(p.ModelData.TradingDeal.IsBuy,!0,e),e?p.ModelData.isReadOnlyGhiNo_NgoaiTe2=a:p.ModelData.isReadOnlyGhiNo_NgoaiTe=a,a)?0<p.ModelData.TM_TaiKhoanTienSource.length&&(e?(p.ModelData.GhiNo_NgoaiTe2=p.ModelData.TM_TaiKhoanTienSource[0].DisplayAccount,p.ModelData.TKNTGhiNoName2=i(p.ModelData.TM_TaiKhoanTienSource[0])):(p.ModelData.GhiNo_NgoaiTe=p.ModelData.TM_TaiKhoanTienSource[0].DisplayAccount,p.ModelData.TKNTGhiNoName=i(p.ModelData.TM_TaiKhoanTienSource[0]))):$formCreator.createNewModalSelectable("",p.ModelData.TM_TaiKhoanTienColumns,p.ModelData.TM_TaiKhoanTienSource,p.ModelData.GhiNo_NgoaiTeSelected).result.then(function(a){p.ModelData.GhiNo_NgoaiTeSelected=a,null!=p.ModelData.GhiNo_NgoaiTeSelected?e?(p.ModelData.GhiNo_NgoaiTe2=p.ModelData.GhiNo_NgoaiTeSelected.DisplayAccount,p.ModelData.TKNTGhiNoName2=i(p.ModelData.GhiNo_NgoaiTeSelected)):(p.ModelData.GhiNo_NgoaiTe=p.ModelData.GhiNo_NgoaiTeSelected.DisplayAccount,p.ModelData.TKNTGhiNoName=i(p.ModelData.GhiNo_NgoaiTeSelected)):e?(p.ModelData.GhiNo_NgoaiTe2="",p.ModelData.TKNTGhiNoName2=""):(p.ModelData.GhiNo_NgoaiTe="",p.ModelData.TKNTGhiNoName=""),p.$$phase||p.$digest()},function(){})},p.ModelData.Find_GhiCo_NgoaiTe=function(e){null==e&&(e=!1);var a=u(p.ModelData.TradingDeal.IsBuy,!1,!1,e);(p.ModelData.TM_TaiKhoanTienSource=c(p.ModelData.TradingDeal.IsBuy,!1,e),e?p.ModelData.isReadOnlyGhiCo_NgoaiTe2=a:p.ModelData.isReadOnlyGhiCo_NgoaiTe=a,a)?0<p.ModelData.TM_TaiKhoanTienSource.length&&(e?(p.ModelData.GhiCo_NgoaiTe2=p.ModelData.TM_TaiKhoanTienSource[0].DisplayAccount,p.ModelData.TKNTGhiCoName2=i(p.ModelData.TM_TaiKhoanTienSource[0])):(p.ModelData.GhiCo_NgoaiTe=p.ModelData.TM_TaiKhoanTienSource[0].DisplayAccount,p.ModelData.TKNTGhiCoName=i(p.ModelData.TM_TaiKhoanTienSource[0]))):$formCreator.createNewModalSelectable("",p.ModelData.TM_TaiKhoanTienColumns,p.ModelData.TM_TaiKhoanTienSource,p.ModelData.GhiCo_NgoaiTeSelected).result.then(function(a){p.ModelData.GhiCo_NgoaiTeSelected=a,null!=p.ModelData.GhiCo_NgoaiTeSelected?e?(p.ModelData.GhiCo_NgoaiTe2=p.ModelData.GhiCo_NgoaiTeSelected.DisplayAccount,p.ModelData.TKNTGhiCoName2=i(p.ModelData.GhiCo_NgoaiTeSelected)):(p.ModelData.GhiCo_NgoaiTe=p.ModelData.GhiCo_NgoaiTeSelected.DisplayAccount,p.ModelData.TKNTGhiCoName=i(p.ModelData.GhiCo_NgoaiTeSelected)):e?(p.ModelData.GhiCo_NgoaiTe2="",p.ModelData.TKNTGhiCoName2=""):(p.ModelData.GhiCo_NgoaiTe="",p.ModelData.TKNTGhiCoName=""),p.$$phase||p.$digest()},function(){})},p.ModelData.Find_GhiCo_Vnd=function(e){null==e&&(e=!1);var a=u(p.ModelData.TradingDeal.IsBuy,!1,!0,e);(p.ModelData.TM_TaiKhoanTienSource=D(p.ModelData.TradingDeal.IsBuy,!1,e),e?p.ModelData.isReadOnlyGhiCo_Vnd2=a:p.ModelData.isReadOnlyGhiCo_Vnd=a,a)?0<p.ModelData.TM_TaiKhoanTienSource.length&&(e?(p.ModelData.GhiCo_Vnd2=p.ModelData.TM_TaiKhoanTienSource[0].DisplayAccount,p.ModelData.TKGhiCoName2=i(p.ModelData.TM_TaiKhoanTienSource[0])):(p.ModelData.GhiCo_Vnd=p.ModelData.TM_TaiKhoanTienSource[0].DisplayAccount,p.ModelData.TKGhiCoName=i(p.ModelData.TM_TaiKhoanTienSource[0]))):$formCreator.createNewModalSelectable("",p.ModelData.TM_TaiKhoanTienColumns,p.ModelData.TM_TaiKhoanTienSource,p.ModelData.GhiCo_VndSelected).result.then(function(a){p.ModelData.GhiCo_VndSelected=a,null!=p.ModelData.GhiCo_VndSelected?e?(p.ModelData.GhiCo_Vnd2=p.ModelData.GhiCo_VndSelected.DisplayAccount,p.ModelData.TKGhiCoName2=i(p.ModelData.GhiCo_VndSelected)):(p.ModelData.GhiCo_Vnd=p.ModelData.GhiCo_VndSelected.DisplayAccount,p.ModelData.TKGhiCoName=i(p.ModelData.GhiCo_VndSelected)):e?(p.ModelData.GhiCo_Vnd2="",p.ModelData.TKGhiCoName2=""):(p.ModelData.GhiCo_Vnd="",p.ModelData.TKGhiCoName=""),p.$$phase||p.$digest()},function(){})},p.ModelData.Find_GhiNo_Vnd=function(e){null==e&&(e=!1);var a=u(p.ModelData.TradingDeal.IsBuy,!0,!0,e);(p.ModelData.TM_TaiKhoanTienSource=D(p.ModelData.TradingDeal.IsBuy,!0,e),e?p.ModelData.isReadOnlyGhiNo_Vnd2=a:p.ModelData.isReadOnlyGhiNo_Vnd=a,a)?0<p.ModelData.TM_TaiKhoanTienSource.length&&(e?(p.ModelData.GhiNo_Vnd2=p.ModelData.TM_TaiKhoanTienSource[0].DisplayAccount,p.ModelData.TKGhiNoName2=i(p.ModelData.TM_TaiKhoanTienSource[0])):(p.ModelData.GhiNo_Vnd=p.ModelData.TM_TaiKhoanTienSource[0].DisplayAccount,p.ModelData.TKGhiNoName=i(p.ModelData.TM_TaiKhoanTienSource[0]))):$formCreator.createNewModalSelectable("",p.ModelData.TM_TaiKhoanTienColumns,p.ModelData.TM_TaiKhoanTienSource,p.ModelData.GhiNo_VndSelected).result.then(function(a){p.ModelData.GhiNo_VndSelected=a,null!=p.ModelData.GhiNo_VndSelected?e?(p.ModelData.GhiNo_Vnd2=p.ModelData.GhiNo_VndSelected.DisplayAccount,p.ModelData.TKGhiNoName2=i(p.ModelData.GhiNo_VndSelected)):(p.ModelData.GhiNo_Vnd=p.ModelData.GhiNo_VndSelected.DisplayAccount,p.ModelData.TKGhiNoName=i(p.ModelData.GhiNo_VndSelected)):e?(p.ModelData.GhiNo_Vnd2="",p.ModelData.TKGhiNoName2=""):(p.ModelData.GhiNo_Vnd="",p.ModelData.TKGhiNoName=""),p.$$phase||p.$digest()},function(){})},p.ModelData.RejectFunctionClick=function(){p.ModelData.ButtonAction=ButtonAction.Huy_Thong_tin_Hach_Toan,$appUtil.showPopupConfirm(String.format($appScope.translation.Form_TransactionTab_ComfirmRevert_Reject_hdht,p.ModelData.TradingDeal.MainBrokerOrderId),function(a){if(!0===a){var e=$appGoldOrderState.GetOrderTransactionTriggersEnum(p.ModelData.ButtonAction,p.ModelData.TradingDeal);e!==$func.getEnumString("OrderTriggersEnum",OrderTriggersEnum.Trigger_Null)&&$requestManager.requestCheckBankManager(p,S,p.ModelData.TradingDeal.ClientOrderId,e,p.ModelData.TradingDeal,MsgEntity.TradingDeal)}})},p.ModelData.EditFunctionClick=function(){p.ModelData.IsViewMode=!1,p.ModelData.IsViewBtnUpdate=!0},p.ModelData.GetSynButtoanFunctionClick=function(){$requestManager.requestTradingSyncTransaction(p,S,p.ModelData.TradingDeal.ClientOrderId,null,null,RequestType.SyncTransactionRequest,null)},p.ModelData.CancelFunctionClick=function(){p.ModelData.IsViewMode=!0,p.ModelData.IsViewBtnUpdate=!1,C(p.ModelData.TradingDealMemory,p.ModelData.TradingContractMemory),(p.ModelData.IsSuaHachToanChan2||p.ModelData.IsSuaHachToanChan1)&&(p.ModelData.IsEditAllowed=$operatorManager.hasRole(RoleName.Fx_GoldTrading_tabSymbol_Info_Edit_HachToan)),p.ModelData.ObjT24SynTransaction&&_(p.ModelData.ObjT24SynTransaction,p.ModelData.TradingDeal,p.ModelData.T24SynTransaction)},p.ModelData.ClearFunctionClick=function(){p.ModelData.IsViewMode=!0,p.ModelData.IsViewBtnUpdate=!1,C(p.ModelData.TradingDealMemory,p.ModelData.TradingContractMemory,!0)},p.ModelData.saveProcess=function(){if(function(){p.ModelData.GhiNo_Vnd=p.ModelData.GhiNo_Vnd.toUpperCase(),p.ModelData.GhiCo_Vnd=p.ModelData.GhiCo_Vnd.toUpperCase(),p.ModelData.GhiCo_NgoaiTe=p.ModelData.GhiCo_NgoaiTe.toUpperCase(),p.ModelData.GhiNo_NgoaiTe=p.ModelData.GhiNo_NgoaiTe.toUpperCase(),String.isNullOrEmpty(p.ModelData.GhiNo_Vnd)||(p.ModelData.GhiNo_Vnd=p.ModelData.GhiNo_Vnd.trim());String.isNullOrEmpty(p.ModelData.GhiCo_Vnd)||(p.ModelData.GhiCo_Vnd=p.ModelData.GhiCo_Vnd.trim());String.isNullOrEmpty(p.ModelData.GhiCo_NgoaiTe)||(p.ModelData.GhiCo_NgoaiTe=p.ModelData.GhiCo_NgoaiTe.trim());String.isNullOrEmpty(p.ModelData.GhiNo_NgoaiTe)||(p.ModelData.GhiNo_NgoaiTe=p.ModelData.GhiNo_NgoaiTe.trim());if(p.ModelData.GhiNo_NgoaiTe&&p.ModelData.GhiCo_Vnd&&p.ModelData.GhiNo_NgoaiTe===p.ModelData.GhiCo_Vnd)return y($appScope.translation.duplicateAccount),!1;if(p.ModelData.GhiCo_NgoaiTe&&p.ModelData.GhiNo_Vnd&&p.ModelData.GhiCo_NgoaiTe===p.ModelData.GhiNo_Vnd)return y($appScope.translation.duplicateAccount),!1;if(!p.ModelData.isReadOnlyGhiCo_NgoaiTe&&!$appUtil.checkValidAccount(p.ModelData.GhiCo_NgoaiTe,$appScope.translation.lbl_TKNgoaiteCr,y,{tradingDeal:p.ModelData.TradingDeal,tradingContract:p.ModelData.TradingContract,isTm:p.ModelData.IsTienMat,isCkOut:p.ModelData.IsCK_Out,isGhiNo:!1,isChan2:!1}))return!1;if(!p.ModelData.isReadOnlyGhiNo_Vnd&&!$appUtil.checkValidAccount(p.ModelData.GhiNo_Vnd,$appScope.translation.lbl_TKVNDDr,y,{tradingDeal:p.ModelData.TradingDeal,tradingContract:p.ModelData.TradingContract,isTm:p.ModelData.IsTienMat,isCkOut:p.ModelData.IsCK_Out,isGhiNo:!0,isChan2:!1}))return!1;if(!p.ModelData.isReadOnlyGhiCo_Vnd&&!$appUtil.checkValidAccount(p.ModelData.GhiCo_Vnd,$appScope.translation.lbl_TKVNDCr,y,{tradingDeal:p.ModelData.TradingDeal,tradingContract:p.ModelData.TradingContract,isTm:p.ModelData.IsTienMat,isCkOut:p.ModelData.IsCK_Out,isGhiNo:!1,isChan2:!1}))return!1;var a=$func.convertTextTThtDescription(p.ModelData.Description.toUpperCase());if(p.ModelData.IsViewPlus2){if(String.isNullOrEmpty(p.ModelData.GhiNo_Vnd2)||(p.ModelData.GhiNo_Vnd2=p.ModelData.GhiNo_Vnd2.trim()),String.isNullOrEmpty(p.ModelData.GhiCo_Vnd2)||(p.ModelData.GhiCo_Vnd2=p.ModelData.GhiCo_Vnd2.trim()),String.isNullOrEmpty(p.ModelData.GhiCo_NgoaiTe2)||(p.ModelData.GhiCo_NgoaiTe2=p.ModelData.GhiCo_NgoaiTe2.trim()),String.isNullOrEmpty(p.ModelData.GhiNo_NgoaiTe2)||(p.ModelData.GhiNo_NgoaiTe2=p.ModelData.GhiNo_NgoaiTe2.trim()),p.ModelData.GhiNo_NgoaiTe2&&p.ModelData.GhiCo_Vnd2&&p.ModelData.GhiNo_NgoaiTe2===p.ModelData.GhiCo_Vnd2)return y($appScope.translation.duplicateAccount),!1;if(p.ModelData.GhiCo_NgoaiTe2&&p.ModelData.GhiNo_Vnd2&&p.ModelData.GhiCo_NgoaiTe2===p.ModelData.GhiNo_Vnd2)return y($appScope.translation.duplicateAccount),!1;if(!p.ModelData.isReadOnlyGhiNo_NgoaiTe2&&!$appUtil.checkValidAccount(p.ModelData.GhiNo_NgoaiTe2,$appScope.translation.lbl_TKNgoaiteDr,y,{tradingDeal:p.ModelData.TradingDeal,tradingContract:p.ModelData.TradingContract,isTm:p.ModelData.IsTienMat,isCkOut:p.ModelData.IsCK_Out,isGhiNo:!0,isChan2:!0}))return!1;if(!p.ModelData.isReadOnlyGhiCo_NgoaiTe2&&!$appUtil.checkValidAccount(p.ModelData.GhiCo_NgoaiTe2,$appScope.translation.lbl_TKNgoaiteCr,y,{tradingDeal:p.ModelData.TradingDeal,tradingContract:p.ModelData.TradingContract,isTm:p.ModelData.IsTienMat,isCkOut:p.ModelData.IsCK_Out,isGhiNo:!1,isChan2:!0}))return!1;if(!p.ModelData.isReadOnlyGhiNo_Vnd2&&!$appUtil.checkValidAccount(p.ModelData.GhiNo_Vnd2,$appScope.translation.lbl_TKVNDDr,y,{tradingDeal:p.ModelData.TradingDeal,tradingContract:p.ModelData.TradingContract,isTm:p.ModelData.IsTienMat,isCkOut:p.ModelData.IsCK_Out,isGhiNo:!0,isChan2:!0}))return!1;if(!p.ModelData.isReadOnlyGhiCo_Vnd2&&!$appUtil.checkValidAccount(p.ModelData.GhiCo_Vnd2,$appScope.translation.lbl_TKVNDCr,y,{tradingDeal:p.ModelData.TradingDeal,tradingContract:p.ModelData.TradingContract,isTm:p.ModelData.IsTienMat,isCkOut:p.ModelData.IsCK_Out,isGhiNo:!1,isChan2:!0}))return!1;if(p.ModelData.IsAddNew&&p.ModelData.TradingContractMemory.HtAccountId===p.ModelData.GhiCo_Vnd&&p.ModelData.TradingContractMemory.HtAccountGoldId===p.ModelData.GhiNo_Vnd&&p.ModelData.TradingContractMemory.TTAccountId===p.ModelData.GhiCo_NgoaiTe&&p.ModelData.TradingContractMemory.TTAccountGoldId===p.ModelData.GhiNo_NgoaiTe&&p.ModelData.TradingContractMemory.HtAccountId2===p.ModelData.GhiCo_NgoaiTe2&&p.ModelData.TradingContractMemory.TTDescriptionGold===p.ModelData.GhiNo_Vnd2&&p.ModelData.TradingContractMemory.TTDescription===p.ModelData.GhiCo_Vnd2&&p.ModelData.TradingContractMemory.HtAccountGoldId2===p.ModelData.GhiNo_NgoaiTe2&&p.ModelData.TradingContractMemory.HtDescription===a)return y($appScope.translation.lblConfirmIsNullValue),!1}else if(p.ModelData.IsAddNew&&p.ModelData.TradingContractMemory.HtAccountId===p.ModelData.GhiCo_Vnd&&p.ModelData.TradingContractMemory.HtAccountGoldId===p.ModelData.GhiNo_Vnd&&p.ModelData.TradingContractMemory.TTAccountId===p.ModelData.GhiCo_NgoaiTe&&p.ModelData.TradingContractMemory.TTAccountGoldId===p.ModelData.GhiNo_NgoaiTe&&p.ModelData.TradingContractMemory.HtDescription===a)return y($appScope.translation.lblConfirmIsNullValue),!1;return!0}()){var a=window.$func.clone(p.ModelData.TradingContract);p.ModelData.IsTienMat?a.HtBankOrderEnum=BankOrderEnum.TIEN_MAT:a.HtBankOrderEnum=BankOrderEnum.CHUYEN_KHOAN,a.HtAccountGoldId=p.ModelData.GhiNo_NgoaiTe,a.HtAccountId=p.ModelData.GhiCo_NgoaiTe,a.TTAccountGoldId=p.ModelData.GhiNo_Vnd,a.TTAccountId=p.ModelData.GhiCo_Vnd,a.HtAccountId2=p.ModelData.GhiCo_NgoaiTe2,a.HtAccountGoldId2=p.ModelData.GhiNo_NgoaiTe2,a.TTDescription=p.ModelData.GhiCo_Vnd2,a.TTDescriptionGold=p.ModelData.GhiNo_Vnd2,a.HtDescription=$func.convertTextTThtDescription(p.ModelData.Description.toUpperCase()),p.ModelData.ButtonAction=ButtonAction.Sua_Thong_Tin_Hach_Toan;var e=$appGoldOrderState.GetOrderTransactionTriggersEnum(p.ModelData.ButtonAction,p.ModelData.TradingDeal,p.ModelData.isFull);p.ModelData.TradingDeal&&p.ModelData.TradingDeal.SymbolId2&&OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Thanh_Cong&&(p.ModelData.IsSuaFtGhiCo&&!p.ModelData.IsSuaFtGhiCo2&&(e=$func.getEnumString("OrderTriggersEnum",OrderTriggersEnum.SuaHT_GhiCo_Thanh_Cong)),!p.ModelData.IsSuaFtGhiCo&&p.ModelData.IsSuaFtGhiCo2&&(e=$func.getEnumString("OrderTriggersEnum",OrderTriggersEnum.SuaHT_GhiCo_SwapChan2_Thanh_Cong)),(p.ModelData.IsSuaFtGhiCo&&p.ModelData.IsSuaFtGhiCo2||p.ModelData.IsSuaFtGhiCo&&p.ModelData.IsSuaHachToanChan2)&&(e=$func.getEnumString("OrderTriggersEnum",OrderTriggersEnum.SuaHT_GhiCo_SwapChan12_Thanh_Cong))),p.ModelData.TradingDeal&&!p.ModelData.TradingDeal.SymbolId2&&OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Thanh_Cong&&p.ModelData.IsSuaFtGhiCo&&(e=$func.getEnumString("OrderTriggersEnum",OrderTriggersEnum.SuaHT_GhiCo_Thanh_Cong)),(p.ModelData.IsSuaHachToanChan2||p.ModelData.IsSuaFtGhiCo||p.ModelData.IsSuaFtGhiCo)&&OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Thanh_Cong?e!==$func.getEnumString("OrderTriggersEnum",OrderTriggersEnum.Trigger_Null)&&$requestManager.requestCheckBankManager(p,S,p.ModelData.TradingDeal.ClientOrderId,e,a,MsgEntity.TradingContract):e!==$func.getEnumString("OrderTriggersEnum",OrderTriggersEnum.Trigger_Null)&&$requestManager.RequestTradingOrder(p,S,e,a,MsgEntity.TradingContract)}},p.ModelData.SaveFunctionClick=function(){if(!$validation.hasInvalid(p.element))if(p.ModelData.NotRecceidT24)y($appScope.translation.Note_Recceid_From_T24);else if(function(){var a=!1;p.ModelData.TradingDeal.SymbolId2&&(a=!0);if(p.ModelData.TradingDeal.IsBuy){if(p.ModelData.IsTienMat){if(p.ModelData.TradingContract){if(p.ModelData.GhiNo_NgoaiTe&&3!==p.ModelData.GhiNo_NgoaiTe.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1;if(a&&p.ModelData.GhiCo_NgoaiTe2&&3!==p.ModelData.GhiCo_NgoaiTe2.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1}}else if(p.ModelData.TradingContract){if(p.ModelData.TradingContract.PaymentChannel===PaymentChannelEnum.CITAD)return!0;if(p.ModelData.GhiNo_NgoaiTe&&3!==p.ModelData.GhiNo_NgoaiTe.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1;if(p.ModelData.GhiCo_Vnd&&3!==p.ModelData.GhiCo_Vnd.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1;if(a&&p.ModelData.GhiNo_Vnd2&&3!==p.ModelData.GhiNo_Vnd2.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1;if(a&&p.ModelData.GhiCo_NgoaiTe2&&3!==p.ModelData.GhiCo_NgoaiTe2.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1}}else if(p.ModelData.IsTienMat){if(p.ModelData.TradingContract){if(p.ModelData.GhiCo_NgoaiTe&&3!==p.ModelData.GhiCo_NgoaiTe.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1;if(a&&p.ModelData.GhiNo_NgoaiTe2&&3!==p.ModelData.GhiNo_NgoaiTe2.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1}}else if(p.ModelData.TradingContract){if(p.ModelData.TradingContract.PaymentChannel===PaymentChannelEnum.CITAD)return!0;if(p.ModelData.GhiCo_NgoaiTe&&3!==p.ModelData.GhiCo_NgoaiTe.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1;if(p.ModelData.GhiNo_Vnd&&3!==p.ModelData.GhiNo_Vnd.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1;if(a&&p.ModelData.GhiCo_Vnd2&&3!==p.ModelData.GhiCo_Vnd2.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1;if(a&&p.ModelData.GhiNo_NgoaiTe2&&3!==p.ModelData.GhiNo_NgoaiTe2.indexOf(p.ModelData.TradingContract.CustomerAccount))return y(String.format($appScope.translation.checkAcount_Error,"xxx"+p.ModelData.TradingContract.CustomerAccount+"xxx")),!1}return function(a){var e=!0,t=!0,o=$operatorManager.getListAccountByMemberId(p.ModelData.MemberId),n=$operatorManager.getBaseSymbolById(p.ModelData.TradingDeal.BaseSymbolId);if(!n)return!1;var l=n.FullName.split("/"),i="";1<l.length&&(i=l[1]);var d=[];if(n)var d=n.FullName.split("/");if(o&&0<o.length){if(p.ModelData.IsTienMat){for(var r=null,s=0;s<o.length;s++){if(p.ModelData.TradingDeal.IsBuy&&o[s].DisplayAccount===p.ModelData.GhiNo_NgoaiTe){r=o[s];break}if(!p.ModelData.TradingDeal.IsBuy&&o[s].DisplayAccount===p.ModelData.GhiCo_NgoaiTe){r=o[s];break}}if(null===r)return y($appScope.translation.duplicateAccount_KH),!1;if(r.Currency!==p.ModelData.TradingDeal.Currency)return y($appScope.translation.duplicateAccount_Currency),!1}else{if(p.ModelData.TradingContract.PaymentChannel===PaymentChannelEnum.CITAD)return!0;var c=null,D=null;if(o&&0<o.length)for(var s=0;s<o.length;s++)p.ModelData.TradingDeal.IsBuy||o[s].DisplayAccount!==p.ModelData.GhiCo_NgoaiTe||(c=o[s]),p.ModelData.TradingDeal.IsBuy&&o[s].DisplayAccount===p.ModelData.GhiNo_NgoaiTe&&(c=o[s]),p.ModelData.TradingDeal.IsBuy||o[s].DisplayAccount!==p.ModelData.GhiNo_Vnd||(D=o[s]),p.ModelData.TradingDeal.IsBuy&&o[s].DisplayAccount===p.ModelData.GhiCo_Vnd&&(D=o[s]);null===c?(y($appScope.translation.duplicateAccount_KH1),t=!1):c.Currency!==p.ModelData.TradingDeal.Currency&&(y($appScope.translation.duplicateAccount_Currency),t=!1),null===D?(y($appScope.translation.duplicateAccount_KH2),t=!1):0<d.length&&D.Currency!==d[1]&&(y($appScope.translation.duplicateAccount_Currency),t=!1)}if(a&&o&&0<o.length)if(p.ModelData.IsTienMat){for(var u=null,s=0;s<o.length;s++){if(p.ModelData.TradingDeal.IsBuy&&o[s].DisplayAccount===p.ModelData.GhiCo_NgoaiTe2){u=o[s];break}if(!p.ModelData.TradingDeal.IsBuy&&o[s].DisplayAccount===p.ModelData.GhiNo_NgoaiTe2){u=o[s];break}}if(null===u)return y($appScope.translation.duplicateAccount_KH),!1;if(u.Currency!==p.ModelData.TradingDeal.Currency)return y($appScope.translation.duplicateAccount_Currency),!1}else{for(var M=null,T=null,s=0;s<o.length;s++)p.ModelData.TradingDeal.IsBuy&&o[s].DisplayAccount===p.ModelData.GhiNo_Vnd2&&(M=o[s]),p.ModelData.TradingDeal.IsBuy||o[s].DisplayAccount!==p.ModelData.GhiNo_NgoaiTe2||(M=o[s]),p.ModelData.TradingDeal.IsBuy&&o[s].DisplayAccount===p.ModelData.GhiCo_NgoaiTe2&&(T=o[s]),p.ModelData.TradingDeal.IsBuy||o[s].DisplayAccount!==p.ModelData.GhiCo_Vnd2||(T=o[s]);if(null===M)y($appScope.translation.duplicateAccount_KH1),e=!1;else{var h=p.ModelData.TradingDeal.IsBuy?d[1]:p.ModelData.TradingDeal.Currency;M.Currency!==h&&(y($appScope.translation.duplicateAccount_Currency),e=!1)}if(null===T)y($appScope.translation.duplicateAccount_KH2),e=!1;else{var i=p.ModelData.TradingDeal.IsBuy?p.ModelData.TradingDeal.Currency:d[1];T.Currency!==i&&(y($appScope.translation.duplicateAccount_Currency),e=!1)}}}if(t)return a?e:t;return t}(a)}()){var a=0,e=1;if(!p.ModelData.TradingDeal.IsBuy&&p.ModelData.IsTienMat&&(e=0),e&&p.ModelData.TradingDeal.EffectiveTime){var t=DateTime.convertToDatetime(p.ModelData.TradingDeal.EffectiveTime),o=$operatorManager.getBusinessDate(),n=DateTime.compareDate(t,o);OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]!==OrderStatelessEnum.Cho_Nhap_TTHT&&OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]!==OrderStatelessEnum.Cho_KSV_PDHT||n<0&&(a=1,$appUtil.showPopupConfirm($appScope.translation.ConfirmCheckSoDuT24NgayBackDate,function(a){!0===a&&p.ModelData.saveProcess()}))}a||p.ModelData.saveProcess()}},p.ModelData.FxBaseSymbolInfo=$operatorManager.getFxBaseSymbolInfo(p.ModelData.TradingDeal.BaseSymbolId),$requestManager.requestGetListCustomerSynchronizeRequest(p,S,p.ModelData.TradingContract.CustomerAccount),p.ModelData.isReadOnlyGhiNo_NgoaiTe2=u(p.ModelData.TradingDeal.IsBuy,!0,!1,!0),p.ModelData.isReadOnlyGhiNo_NgoaiTe=u(p.ModelData.TradingDeal.IsBuy,!0,!1,!1),p.ModelData.isReadOnlyGhiCo_NgoaiTe2=u(p.ModelData.TradingDeal.IsBuy,!1,!1,!0),p.ModelData.isReadOnlyGhiCo_NgoaiTe=u(p.ModelData.TradingDeal.IsBuy,!1,!1,!1),p.ModelData.isReadOnlyGhiCo_Vnd2=u(p.ModelData.TradingDeal.IsBuy,!1,!0,!0),p.ModelData.isReadOnlyGhiCo_Vnd=u(p.ModelData.TradingDeal.IsBuy,!1,!0,!1),p.ModelData.isReadOnlyGhiNo_Vnd2=u(p.ModelData.TradingDeal.IsBuy,!0,!0,!0),p.ModelData.isReadOnlyGhiNo_Vnd=u(p.ModelData.TradingDeal.IsBuy,!0,!0,!1)}}catch(a){console.error(a)}var n;function y(a){var e=$appUtil.getTitleForm(p);$dockingManager.updateWarningWindow(e,a)}function l(a,e){var t=$appGoldOrderState.GetTransactionEdit(a,e,!1);a===ButtonAction.Sua_Thong_Tin_Hach_Toan&&(p.ModelData.IsAddNew=!0,p.ModelData.IsEditAllowed=!1,p.ModelData.IsViewMode=!0,t&&(OrderStatelessEnum[e.CurrentState]===OrderStatelessEnum.Cho_Nhap_TTHT?$operatorManager.hasRole(RoleName.Role_Fx_Trans_tabTTHT_Info_Edit_HachToan)?(p.ModelData.IsAddNew=!1,p.ModelData.IsViewMode=!1,p.ModelData.IsEditAllowed=!1):(p.ModelData.IsAddNew=!0,p.ModelData.IsViewMode=!0):(p.ModelData.IsAddNew=!0,p.ModelData.IsViewMode=!0,p.ModelData.IsEditAllowed=$operatorManager.hasRole(RoleName.Fx_GoldTrading_tabSymbol_Info_Edit_HachToan))));a===ButtonAction.Huy_Thong_tin_Hach_Toan&&(p.ModelData.AllowedReject=!1,t&&($operatorManager.hasRole(RoleName.Fx_Trans_TabTransaction_AllowedReject)&&(p.ModelData.AllowedReject=!0),OrderStatelessEnum[e.CurrentState]===OrderStatelessEnum.Thanh_Cong&&p.ModelData.IsCheckApprovalBt&&(p.ModelData.AllowedReject=!1),OrderStatelessEnum[e.CurrentState]===OrderStatelessEnum.Thanh_Cong&&p.ModelData.isDongBoLoi&&$operatorManager.hasRole(RoleName.Fx_Trans_TabTransaction_AllowedReject)&&(p.ModelData.AllowedReject=!0),OrderStatelessEnum[e.CurrentState]===OrderStatelessEnum.Thanh_Cong&&p.ModelData.isErrorVS02&&(p.ModelData.AllowedReject=!1)))}function i(a){return a.AccountType===AccountType.GL_TK_Mat_TQ||a.AccountType===AccountType.GL_Tk_Treo?$appUtil.convertAccountTypeName(a.AccountType):a.FullName}function d(a){var e=$operatorManager.getAccountByDisplayAccount(a);return e?i(e):""}function C(a,e,t){if(p.ModelData.IsStatus=!0,null!=a&&null!=e){if(OrderStatelessEnum[a.CurrentState]===OrderStatelessEnum.Cho_Nhap_TTHD&&(p.ModelData.IsStatus=!1),"Cho_KSV_PDHT"===a.CurrentState||"Cho_HO_PDH_Hoan_Toan_Cho_KSV_PDHT"===a.CurrentState||"Cho_Sale_PDH_Cho_KSV_PDHT"===a.CurrentState||"Cho_Revert_Trang_Thai_GD_Cho_KSV_PDHT"===a.CurrentState?p.ModelData.Description=$func.convertTextTThtDescription((e.HtDescription||"").toUpperCase()):!e.HtDescription&&a.Note?p.ModelData.Description=$func.convertTextTThtDescription(a.Note.toUpperCase()):p.ModelData.Description=$func.convertTextTThtDescription((e.HtDescription||"").toUpperCase()),p.ModelData.MemberId=a.CustomerId,e.BankOrderEnum===BankOrderEnum.CHUYEN_KHOAN?(p.ModelData.IsCK=!0,p.ModelData.IsTienMat=!1,p.ModelData.TradingContract.PaymentChannel===PaymentChannelEnum.Nomal?(p.ModelData.IsCK_In=!0,p.ModelData.IsCK_Out=!1):(p.ModelData.IsCK_In=!1,p.ModelData.IsCK_Out=!0)):(p.ModelData.IsCK=!1,p.ModelData.IsTienMat=!0,p.ModelData.IsCK_In=!1,p.ModelData.IsCK_Out=!1),t?(p.ModelData.GhiCo_NgoaiTe="",p.ModelData.GhiNo_NgoaiTe="",p.ModelData.GhiCo_Vnd="",p.ModelData.GhiNo_Vnd="",p.ModelData.GhiCo_NgoaiTe2="",p.ModelData.GhiNo_NgoaiTe2="",p.ModelData.GhiCo_Vnd2="",p.ModelData.GhiNo_Vnd2=""):(p.ModelData.GhiCo_NgoaiTe=e.HtAccountId,p.ModelData.GhiNo_NgoaiTe=e.HtAccountGoldId,p.ModelData.GhiCo_Vnd=e.TTAccountId,p.ModelData.GhiNo_Vnd=e.TTAccountGoldId,p.ModelData.GhiCo_NgoaiTe2=e.HtAccountId2,p.ModelData.GhiNo_NgoaiTe2=e.HtAccountGoldId2,p.ModelData.GhiCo_Vnd2=e.TTDescription,p.ModelData.GhiNo_Vnd2=e.TTDescriptionGold),OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Cho_Nhap_TTHT){t||(p.ModelData.GhiCo_NgoaiTe=s(p.ModelData.TradingContract,a.IsBuy,!1,!1)),p.ModelData.isReadOnlyGhiCo_NgoaiTe=u(p.ModelData.TradingDeal.IsBuy,!1,!1);var o=c(p.ModelData.TradingDeal.IsBuy,!1);p.ModelData.isReadOnlyGhiCo_NgoaiTe&&0<o.length&&(p.ModelData.GhiCo_NgoaiTe=o[0].DisplayAccount),t||(p.ModelData.GhiNo_NgoaiTe=s(p.ModelData.TradingContract,a.IsBuy,!0,!1)),p.ModelData.isReadOnlyGhiNo_NgoaiTe=u(p.ModelData.TradingDeal.IsBuy,!0,!1),o=c(p.ModelData.TradingDeal.IsBuy,!0),p.ModelData.isReadOnlyGhiNo_NgoaiTe&&0<o.length&&(p.ModelData.GhiNo_NgoaiTe=o[0].DisplayAccount),t||(p.ModelData.GhiCo_Vnd=s(p.ModelData.TradingContract,a.IsBuy,!1,!1)),p.ModelData.isReadOnlyGhiCo_Vnd=u(p.ModelData.TradingDeal.IsBuy,!1,!0),o=D(p.ModelData.TradingDeal.IsBuy,!1),p.ModelData.isReadOnlyGhiCo_Vnd&&0<o.length&&(p.ModelData.GhiCo_Vnd=o[0].DisplayAccount),t||(p.ModelData.GhiNo_Vnd=s(p.ModelData.TradingContract,a.IsBuy,!0,!1)),p.ModelData.isReadOnlyGhiNo_Vnd=u(p.ModelData.TradingDeal.IsBuy,!0,!0),o=D(p.ModelData.TradingDeal.IsBuy,!0),p.ModelData.isReadOnlyGhiNo_Vnd&&0<o.length&&(p.ModelData.GhiNo_Vnd=o[0].DisplayAccount),t||(p.ModelData.GhiCo_NgoaiTe2=s(p.ModelData.TradingContract,a.IsBuy,!1,!0)),p.ModelData.isReadOnlyGhiCo_NgoaiTe2=u(p.ModelData.TradingDeal.IsBuy,!1,!1,!0),o=c(p.ModelData.TradingDeal.IsBuy,!1,!0),p.ModelData.isReadOnlyGhiCo_NgoaiTe2&&0<o.length&&(p.ModelData.GhiCo_NgoaiTe2=o[0].DisplayAccount),t||(p.ModelData.GhiNo_NgoaiTe2=s(p.ModelData.TradingContract,a.IsBuy,!0,!0)),p.ModelData.isReadOnlyGhiNo_NgoaiTe2=u(p.ModelData.TradingDeal.IsBuy,!0,!1,!0),o=c(p.ModelData.TradingDeal.IsBuy,!0,!0),p.ModelData.isReadOnlyGhiNo_NgoaiTe2&&0<o.length&&(p.ModelData.GhiNo_NgoaiTe2=o[0].DisplayAccount),t||(p.ModelData.GhiCo_Vnd2=s(p.ModelData.TradingContract,a.IsBuy,!1,!0)),p.ModelData.isReadOnlyGhiCo_Vnd2=u(p.ModelData.TradingDeal.IsBuy,!1,!0,!0),o=D(p.ModelData.TradingDeal.IsBuy,!1,!0),p.ModelData.isReadOnlyGhiCo_Vnd2&&0<o.length&&(p.ModelData.GhiCo_Vnd2=o[0].DisplayAccount),t||(p.ModelData.GhiNo_Vnd2=s(p.ModelData.TradingContract,a.IsBuy,!0,!0)),p.ModelData.isReadOnlyGhiNo_Vnd2=u(p.ModelData.TradingDeal.IsBuy,!0,!0,!0),o=D(p.ModelData.TradingDeal.IsBuy,!0,!0),p.ModelData.isReadOnlyGhiNo_Vnd2&&0<o.length&&(p.ModelData.GhiNo_Vnd2=o[0].DisplayAccount)}p.ModelData.TKNTGhiCoName=d(p.ModelData.GhiCo_NgoaiTe),p.ModelData.TKNTGhiNoName=d(p.ModelData.GhiNo_NgoaiTe),p.ModelData.TKGhiCoName=d(p.ModelData.GhiCo_Vnd),p.ModelData.TKGhiNoName=d(p.ModelData.GhiNo_Vnd),p.ModelData.TKNTGhiCoName2=d(p.ModelData.GhiCo_NgoaiTe2),p.ModelData.TKNTGhiNoName2=d(p.ModelData.GhiNo_NgoaiTe2),p.ModelData.TKGhiCoName2=d(p.ModelData.GhiCo_Vnd2),p.ModelData.TKGhiNoName2=d(p.ModelData.GhiNo_Vnd2),l(ButtonAction.Sua_Thong_Tin_Hach_Toan,p.ModelData.TradingDeal),l(ButtonAction.Huy_Thong_tin_Hach_Toan,p.ModelData.TradingDeal);var n=$operatorManager.getLoggedOnMemberInfo();null!=n&&(n.MemberType===MemberType.Administrator&&TaskName[p.ModelData.TradingDeal.TaskNameString]!==TaskName.FX_TSC_DelayTrade&&TaskName[p.ModelData.TradingDeal.TaskNameString]!==TaskName.FX_TD_TSC_Thuong&&TaskName[p.ModelData.TradingDeal.TaskNameString]!==TaskName.FX_TDCN_Thuong&&(OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]!==OrderStatelessEnum.Cho_Nhap_TTHT&&(p.ModelData.IsAddNew=!0),p.ModelData.IsAddNew&&(p.ModelData.IsViewMode=!0)),OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Thanh_Cong&&String.isNullOrEmpty(e.TTAccountId)&&String.isNullOrEmpty(e.TTAccountGoldId)&&(p.ModelData.IsEditAllowed=!1),null!=a.SymbolId2&&(p.ModelData.IsViewPlus2=!0),r(a))}}function r(a){var e=p.ModelData.TradingDealRef;OrderStatelessEnum[a.CurrentState]===OrderStatelessEnum.Thanh_Cong&&e&&(p.ModelData.IsSuaFtGhiCo=!1,p.ModelData.IsSuaFtGhiCo2=!1,p.ModelData.IsKhongChoSua=!1,p.ModelData.IsKhongChoSua2=!1,a.SymbolId2?(p.ModelData.TradingDealRef.TransactionFXStatus1!==TransactionFXStatus.Approval&&p.ModelData.TradingDealRef.TransactionFXStatus2!==TransactionFXStatus.Approval||(p.ModelData.AllowedReject=!1),p.ModelData.TradingDealRef.DrFXStatus1===TransactionFXStatus.Approval&&e.CrStatus1===SyncStatus.SyncFail&&e.CrErr1!=SyncErrorCode.VS02&&(p.ModelData.IsSuaFtGhiCo=!0),p.ModelData.TradingDealRef.CrFXStatus1===TransactionFXStatus.Approval&&e.CrStatus1===SyncStatus.SyncSuccess&&(p.ModelData.IsKhongChoSua=!0),p.ModelData.TradingDealRef.DrFXStatus2===TransactionFXStatus.Approval&&e.CrStatus2===SyncStatus.SyncFail&&e.CrErr2!=SyncErrorCode.VS02&&(p.ModelData.IsSuaFtGhiCo2=!0),p.ModelData.TradingDealRef.CrFXStatus2===TransactionFXStatus.Approval&&p.ModelData.TradingDealRef.DrFXStatus2===TransactionFXStatus.Approval&&e.CrStatus2===SyncStatus.SyncSuccess&&e.DrStatus2===SyncStatus.SyncSuccess&&(p.ModelData.IsKhongChoSua2=!0),p.ModelData.TradingDealRef.CrFXStatus2===TransactionFXStatus.Approval&&e.CrStatus2===SyncStatus.SyncSuccess&&(p.ModelData.IsKhongChoSua2=!0),p.ModelData.TradingDealRef.DrFXStatus1===TransactionFXStatus.Approval&&e.CrStatus1===SyncStatus.SyncFail&&e.CrErr1!=SyncErrorCode.VS02&&p.ModelData.TradingDealRef.DrFXStatus2===TransactionFXStatus.Approval&&e.CrStatus2===SyncStatus.SyncFail&&(e.CrErr2,SyncErrorCode.VS02),(p.ModelData.IsSuaFtGhiCo2||p.ModelData.IsSuaFtGhiCo)&&(p.ModelData.IsAddNew=!0,p.ModelData.IsViewMode=!0,p.ModelData.IsEditAllowed=$operatorManager.hasRole(RoleName.Fx_GoldTrading_tabSymbol_Info_Edit_HachToan))):(p.ModelData.TradingDealRef.TransactionFXStatus1===TransactionFXStatus.Approval&&(p.ModelData.AllowedReject=!1),p.ModelData.TradingDealRef.CrFXStatus1===TransactionFXStatus.Approval&&e.CrStatus1===SyncStatus.SyncSuccess&&(p.ModelData.IsKhongChoSua=!0),p.ModelData.TradingDealRef.DrFXStatus1===TransactionFXStatus.Approval&&e.CrStatus1===SyncStatus.SyncFail&&e.CrErr1!=SyncErrorCode.VS02&&(p.ModelData.IsSuaFtGhiCo=!0),p.ModelData.IsSuaFtGhiCo&&(p.ModelData.IsAddNew=!0,p.ModelData.IsViewMode=!0,p.ModelData.IsEditAllowed=$operatorManager.hasRole(RoleName.Fx_GoldTrading_tabSymbol_Info_Edit_HachToan))))}function s(a,e,t,o){if(!a)return"";var n=!0;if(p.ModelData.TradingContract.BankOrderEnum===BankOrderEnum.CHUYEN_KHOAN&&0<p.ModelData.TradingContract.PaymentChannel&&(n=!1),t)return o?n?a.AccountNBGold2:a.BankAccountId2:n?a.AccountNBGold:a.BankAccountId;if(o){if(n)return a.AccountNB2}else if(n)return a.AccountNB}function M(a){var e="",t=p.ModelData.TradingDeal.AffectBranchId,o=$operatorManager.getMemberInfo(t);if(null!=o&&!String.isNullOrEmpty(o.DisplayMemberName)){var n=o.DisplayMemberName;4<n.length?e=n.substr(-4):4===n.length?e=o.DisplayMemberName:0<n.length&&(e=o.DisplayMemberName)}return function(a){if(a){if(console.warn("BizLine: "+a.BizLine),-1<a.BizLine.indexOf("BIG"))return!0;if(-1<a.BizLine.indexOf("MMD"))return!0}return!1}(p.ModelData.TradingDealRef)?{DisplayAccount:a+$appScope.translation.lbl115570001+$appScope.translation.lblBkb0394}:{DisplayAccount:a+$appScope.translation.lbl115570001+e}}function c(a,e,t){var o=[],n=$operatorManager.getFxBaseSymbolInfo(p.ModelData.TradingDeal.BaseSymbolId);if(null!=n)if(!t==(!e!=!a)){var l=M(n.Currency);o.push(l)}else{for(var i=$operatorManager.getListAccountByMemberId(p.ModelData.TradingDeal.AffectMemberId),d=0;d<i.length;d++){var r=i[d];if(r.Currency===n.Currency){if(p.ModelData.IsTienMat&&r.AccountType===AccountType.GL_TK_Mat_TQ&&(a&&e||!a&&!e))continue;if(p.ModelData.IsTienMat&&r.AccountType===AccountType.GL_TK_Mat_TQ||p.ModelData.IsCK_Out&&r.AccountType===AccountType.GL_Tk_Treo){var s={};s.DisplayAccount=r.DisplayAccount,s.AccountId=r.AccountId,s.FullName=r.FullName,s.AccountType=r.AccountType,s.AccountTypeName=$appUtil.convertAccountTypeName(r.AccountType),o.push(s)}}}for(var c=T(n.Currency),D=0;D<c.length;D++){var u=c[D];o.push(u)}}return o}function T(a){for(var e=[],t=$operatorManager.getListAccountByMemberId(p.ModelData.TradingDeal.CustomerId),o=0;o<t.length;o++){var n=t[o];if(n.Currency===a&&$appUtil.checkCategoryTKKH(n)){var l={};l.DisplayAccount=n.DisplayAccount,l.AccountId=n.AccountId,l.FullName=n.FullName,l.AccountType=n.AccountType,l.AccountTypeName=$appUtil.convertAccountTypeName(n.AccountType),e.push(l)}}return e}function D(a,e,t){var o=[],n=$operatorManager.getFxBaseSymbolInfo(p.ModelData.TradingDeal.BaseSymbolId);if(n)if(!t==(!e==!a)){var l=M(n.PosCurrency);o.push(l)}else{for(var i=$operatorManager.getListAccountByMemberId(p.ModelData.TradingDeal.AffectMemberId),d=0;d<i.length;d++){var r=i[d];if(r.Currency===n.PosCurrency&&(p.ModelData.IsTienMat&&r.AccountType===AccountType.GL_TK_Mat_TQ||p.ModelData.IsCK_Out&&r.AccountType===AccountType.GL_Tk_Treo)){var s={};s.DisplayAccount=r.DisplayAccount,s.AccountId=r.AccountId,s.FullName=r.FullName,s.AccountType=r.AccountType,s.AccountTypeName=$appUtil.convertAccountTypeName(r.AccountType),o.push(s)}}if(p.ModelData.IsCK)for(var c=T(n.PosCurrency),D=0;D<c.length;D++){var u=c[D];o.push(u)}}return o}function u(a,e,t,o){if(o){if(t){if(!e&&a||e&&!a)return!0}else if(!e&&!a||e&&a)return!0}else if(t){if(!e&&!a||e&&a)return!0}else if(!e&&a||e&&!a)return!0;return!1}function _(a,e,t){e&&(e.SymbolId===a.SymbolId&&(p.ModelData.ButtoanChan1=!0),e.SymbolId2===a.SymbolId&&(p.ModelData.ButtoanChan2=!0)),a.SyncStatus===SyncStatus.SyncFail&&a.ErrorCode===SyncErrorCode.VS02&&(p.ModelData.AllowedReject=!1);var o=$operatorManager.getLoggedOnMemberInfo();if(p.ModelData.IsSuaHachToanChan2=!1,p.ModelData.IsSuaHachToanChan1=!1,e&&OrderStatelessEnum[e.CurrentState]===OrderStatelessEnum.Thanh_Cong){if(a.SyncStatus===SyncStatus.SyncFail&&a.ErrorCode!=SyncErrorCode.VS02)if(o.MemberType!==MemberType.Administrator||OrderTypeEnum[e.OrderTypeEnum]!==OrderTypeEnum.FXLenhHOThuong&&OrderTypeEnum[e.OrderTypeEnum]!==OrderTypeEnum.FXLenhHODelaytrade||$operatorManager.hasRole(RoleName.Fx_Trans_TabTransaction_AllowedReject)&&(p.ModelData.AllowedReject=!0),OrderTypeEnum[e.OrderTypeEnum]!==OrderTypeEnum.GoldLenhBranch&&OrderTypeEnum[e.OrderTypeEnum]!==OrderTypeEnum.FXLenhBranchDelaytrade||o.MemberType!==MemberType.Client||$operatorManager.hasRole(RoleName.Fx_Trans_TabTransaction_AllowedReject)&&(p.ModelData.AllowedReject=!0),t&&0<t.length)$func.firstOrDefault(t,function(a){return a.TransactionFXStatus===TransactionFXStatus.Approval})&&(p.ModelData.AllowedReject=!1);if(t&&0<t.length&&p.ModelData.TradingDeal.SymbolId2){p.ModelData.IsApprovalButtoanChan1=!1,p.ModelData.IsApprovalButtoanChan2=!1,p.ModelData.ExistButtoanChan2=!1;for(var n=0;n<p.ModelData.T24SynTransaction.length;n++){var l=p.ModelData.T24SynTransaction[n];l&&(l.TransactionFXStatus!==TransactionFXStatus.Approval||l.SymbolId!==e.SymbolId||l.SyncIndex!==SyncIndexEnum.IsHT&&l.SyncIndex!==SyncIndexEnum.IsTT||(p.ModelData.IsApprovalButtoanChan1=!0),l.TransactionFXStatus===TransactionFXStatus.Approval&&l.SymbolId===e.SymbolId2&&(l.SyncIndex!==SyncIndexEnum.IsHTSw&&l.SyncIndex!==SyncIndexEnum.IsTTSw||(p.ModelData.IsApprovalButtoanChan2=!0,p.ModelData.ExistButtoanChan2=!0)))}p.ModelData.IsApprovalButtoanChan1&&!p.ModelData.IsApprovalButtoanChan2?(p.ModelData.AllowedReject=!1,p.ModelData.IsSuaHachToanChan2=!0):p.ModelData.IsApprovalButtoanChan1&&!p.ModelData.ExistButtoanChan2?p.ModelData.IsSuaHachToanChan2=!0:(p.ModelData.IsApprovalButtoanChan1||p.ModelData.IsApprovalButtoanChan2)&&(p.ModelData.AllowedReject=!1),p.ModelData.TradingDealRef&&p.ModelData.TradingDealRef.CrStatus1===SyncStatus.SyncSuccess&&p.ModelData.TradingDealRef.DrStatus1===SyncStatus.SyncSuccess&&p.ModelData.TradingDealRef.CrStatus2===SyncStatus.SyncSuccess&&p.ModelData.TradingDealRef.DrStatus2===SyncStatus.SyncSuccess&&(p.ModelData.IsSuaHachToanChan1=!1,p.ModelData.IsSuaHachToanChan2=!1),(p.ModelData.IsSuaHachToanChan2||p.ModelData.IsSuaHachToanChan1)&&(p.ModelData.IsAddNew=!0,p.ModelData.IsViewMode=!0,p.ModelData.IsEditAllowed=$operatorManager.hasRole(RoleName.Fx_GoldTrading_tabSymbol_Info_Edit_HachToan))}p.ModelData.ButtoanChan1&&a.TransactionFXStatus===TransactionFXStatus.Approval&&p.ModelData.IsLenhChan2&&(o.MemberType!==MemberType.Administrator||OrderTypeEnum[e.OrderTypeEnum]!==OrderTypeEnum.FXLenhHOThuong&&OrderTypeEnum[e.OrderTypeEnum]!==OrderTypeEnum.FXLenhHODelaytrade||$operatorManager.hasRole(RoleName.Fx_Trans_TabTransaction_AllowedReject),OrderTypeEnum[e.OrderTypeEnum]!==OrderTypeEnum.GoldLenhBranch&&OrderTypeEnum[e.OrderTypeEnum]!==OrderTypeEnum.FXLenhBranchDelaytrade||o.MemberType!==MemberType.Client||$operatorManager.hasRole(RoleName.Fx_Trans_TabTransaction_AllowedReject))}}function h(a,e){try{var t=e.BaseEntity;if(null==t)return;if(a===MsgEntity.CustomerSynchronize&&p.ModelData.TradingContract.CustomerAccount===t.CustomerId&&(p.ModelData.NotRecceidT24=!1),a===MsgEntity.TradingDeal&&t.ClientOrderId===p.ModelData.TradingDeal.ClientOrderId&&(p.ModelData.TradingDeal=t,p.ModelData.TradingDealMemory=t,C(p.ModelData.TradingDealMemory,p.ModelData.TradingContractMemory),OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Thanh_Cong&&(_(p.ModelData.ObjT24SynTransaction,p.ModelData.TradingDeal,p.ModelData.T24SynTransaction),null!=p.ModelData.ListT24SynTransaction&&p.ModelData.ListT24SynTransaction.length),(p.ModelData.IsSuaHachToanChan1||p.ModelData.IsSuaHachToanChan2)&&(p.ModelData.IsEditAllowed=!1,OrderStatelessEnum[t.CurrentState]===OrderStatelessEnum.Thanh_Cong&&(p.ModelData.IsEditAllowed=$operatorManager.hasRole(RoleName.Fx_GoldTrading_tabSymbol_Info_Edit_HachToan)))),a===MsgEntity.TradingContract&&t.ClientOrderId===p.ModelData.TradingContract.ClientOrderId&&(p.ModelData.TradingContract=t,p.ModelData.TradingContractMemory=t,C(p.ModelData.TradingDealMemory,p.ModelData.TradingContract),OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Thanh_Cong&&null!=p.ModelData.ListT24SynTransaction&&p.ModelData.ListT24SynTransaction.length),a===MsgEntity.T24SynTransaction&&null!=p.ModelData.TradingContract&&p.ModelData.TradingContract.ClientOrderId===t.ClientOrderId){p.ModelData.TransactionFXStatus=t.TransactionFXStatus,p.ModelData.ObjT24SynTransaction=t,p.ModelData.IsShowButtonGetButtoan=!1,t.TransactionFXStatus===TransactionFXStatus.Approval&&(p.ModelData.IsCheckApprovalBt=!0),OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Thanh_Cong&&p.ModelData.IsCheckApprovalBt&&(p.ModelData.AllowedReject=!1),OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Thanh_Cong&&p.ModelData.IsCheckApprovalBt&&(p.ModelData.IsEditAllowed=!1),t.SyncStatus===SyncStatus.SyncFail&&t.ErrorCode!=SyncErrorCode.VS02&&OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Thanh_Cong&&$operatorManager.hasRole(RoleName.Fx_Trans_TabTransaction_AllowedReject)&&(p.ModelData.AllowedReject=!0),null==p.ModelData.T24SynTransaction&&(p.ModelData.T24SynTransaction=[]);var o=$func.firstOrDefault(p.ModelData.T24SynTransaction,function(a){return a.T24SynTransactionId===t.T24SynTransactionId});if(null!=o){var n=p.ModelData.T24SynTransaction.indexOf(o);p.ModelData.T24SynTransaction[n]=t}else p.ModelData.T24SynTransaction.push(t);t.SyncStatus===SyncStatus.SyncFail&&t.ErrorCode===SyncErrorCode.VS02&&(p.ModelData.isErrorVS02=!0,p.ModelData.AllowedReject=!1),p.ModelData.ObjT24SynTransaction&&(p.ModelData.ButtoanChan1=!1,p.ModelData.ButtoanChan2=!1,_(p.ModelData.ObjT24SynTransaction,p.ModelData.TradingDeal,p.ModelData.T24SynTransaction))}if(a===MsgEntity.Account&&t.MemberId===p.ModelData.MemberId&&t.MemberId===p.ModelData.MemberId){var l={};l.Id=t.AccountId,l.DisplayId=t.DisplayAccount,l.Name=t.DisplayAccount}a===MsgEntity.TradingDealRef&&t.ClientOrderId===p.ModelData.TradingDeal.ClientOrderId&&(p.ModelData.TradingDealRef=t,r(p.ModelData.TradingDeal))}catch(a){console.error(a)}}function S(a){try{if(!p.ModelData)return;if(a.Type===MsgResponse.TradingOrderResponse&&(a.ResourcesKeyEnum===ResourcesKeyEnum.Success?(p.ModelData.IsViewMode=!0,p.ModelData.IsAddNew=!0,p.ModelData.IsViewBtnUpdate=!1,(p.ModelData.IsSuaHachToanChan1||p.ModelData.IsSuaHachToanChan2)&&(p.ModelData.IsEditAllowed=!1)):y(p.getResourceValue(a.ResourcesKeyEnum))),a.Type===MsgResponse.CheckBankManagerResponse&&(a.ResourcesKeyEnum===ResourcesKeyEnum.Success?(p.ModelData.IsSuaHachToanChan1||p.ModelData.IsSuaHachToanChan2||p.ModelData.IsSuaFtGhiCo||p.ModelData.IsSuaFtGhiCo2)&&(p.ModelData.IsAddNew=!0,p.ModelData.IsViewMode=!0,p.ModelData.IsViewBtnUpdate=!1,p.ModelData.IsEditAllowed=!1):a.ResourcesKeyEnum===ResourcesKeyEnum.SyncTransactionIsApproval?y($appScope.translation.SyncTransactionIsRejectTtht):y(p.getResourceValue(a.ResourcesKeyEnum))),a.Type===MsgResponse.GetListTradingDealResponse){var e=a.ListTradingDeal;0<e.length&&(p.ModelData.TradingDealParent=e[0])}if(a.Type===MsgResponse.TradingSyncTransactionResponse&&(a.ResourcesKeyEnum===ResourcesKeyEnum.Success?$appUtil.showNotifySuccess(String.format($appScope.translation.Form_Synchronization_Succsess,p.ModelData.TradingDeal.MainBrokerOrderId)):y(p.getResourceValue(a.ResourcesKeyEnum))),a.Type===MsgResponse.GetListT24TransactionIdResponse){if(p.ModelData.T24SynTransaction=a.ListT24SynTransaction,p.ModelData.ObjT24SynTransaction=null,p.ModelData.IsButToan1=!1,p.ModelData.IsButToan2=!1,a.ListT24SynTransaction&&0<a.ListT24SynTransaction.length){for(var t=0;t<a.ListT24SynTransaction.length;t++){var o=a.ListT24SynTransaction[t];o.SyncIndex===SyncIndexEnum.IsHT||o.SyncIndex===SyncIndexEnum.IsTT?p.ModelData.IsButToan1=!0:p.ModelData.IsButToan2=!0}var n=a.ListT24SynTransaction[0];p.ModelData.ObjT24SynTransaction=a.ListT24SynTransaction[0],p.ModelData.TransactionFXStatus=n.TransactionFXStatus,n.TransactionFXStatus===TransactionFXStatus.Approval&&(p.ModelData.IsCheckApprovalBt=!0),n.SyncStatus===SyncStatus.SyncFail&&n.ErrorCode!=SyncErrorCode.VS02&&(p.ModelData.isDongBoLoi=!0),n.SyncStatus===SyncStatus.SyncFail&&n.ErrorCode===SyncErrorCode.VS02&&(p.ModelData.isErrorVS02=!0)}if(C(p.ModelData.TradingDeal,p.ModelData.TradingContract),p.ModelData.ObjT24SynTransaction&&(p.ModelData.ButtoanChan1=!1,p.ModelData.ButtoanChan2=!1,_(p.ModelData.ObjT24SynTransaction,p.ModelData.TradingDeal,p.ModelData.T24SynTransaction)),p.ModelData.TradingDeal){var l=0,i=$operatorManager.getBusinessDate(),d=DateTime.convertToDatetime(p.ModelData.TradingDeal.EffectiveTime);if(p.ModelData.TradingDeal.EffectiveTime1){var r=DateTime.convertToDatetime(p.ModelData.TradingDeal.EffectiveTime1);l=DateTime.compareDate(r,i)}var s=DateTime.compareDate(d,i);OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Thanh_Cong&&$operatorManager.hasRole(RoleName.FX_SynsFT_Before_Approval)&&(s<=0&&!p.ModelData.IsButToan1&&!p.ModelData.IsLenhChan2&&(p.ModelData.IsShowButtonGetButtoan=!0),l<=0&&p.ModelData.TradingDeal.EffectiveTime1&&!p.ModelData.IsButToan2&&p.ModelData.IsLenhChan2&&(p.ModelData.IsShowButtonGetButtoan=!0))}if(p.ModelData.TradingDeal&&null!=p.ModelData.TradingDeal.EffectiveTime){var c=DateTime.convertToDatetime(p.ModelData.TradingDeal.EffectiveTime),D=DateTime.addWeekToTime(c,1),u=$operatorManager.getBusinessDate();if(DateTime.compareDate(D,u)<0&&$operatorManager.hasRole(RoleName.Fx_Trans_TabTransaction_AllowedReject))if(a.ListT24SynTransaction&&0<a.ListT24SynTransaction.length)$func.firstOrDefault(a.ListT24SynTransaction,function(a){return a.TransactionFXStatus===TransactionFXStatus.Approval})||p.ModelData.isErrorVS02||(p.ModelData.AllowedReject=!0)}}if(a.Type===MsgResponse.GetListCustomerSynchronizeResponse&&(a.IsSynchronized?p.ModelData.NotRecceidT24=!1:p.ModelData.NotRecceidT24=!0,$requestManager.requestGetListApprovalOrderByClientOrderId(p,S,p.ModelData.TradingDeal.ClientOrderId)),a.Type===MsgResponse.GetListApprovalOrderResponse){var M=a.ListApprovalOrder;if(M){var T=M.sort(function(a,e){return-(a.ApprovalOrderId-e.ApprovalOrderId)});p.ModelData.ListApprovalOrder=T}OrderStatelessEnum[p.ModelData.TradingDeal.CurrentState]===OrderStatelessEnum.Thanh_Cong?(h=p.ModelData.TradingDeal.ClientOrderId,g=RequestType.GetByClientOrderId,$requestManager.requestGetListDataT24SynTransactionRequest(p,S,h,g)):C(p.ModelData.TradingDeal,p.ModelData.TradingContract)}}catch(a){console.error(a)}var h,g}}$templateView.get("fx.transaction.waiting.tab.ttht")||$templateView.put("fx.transaction.waiting.tab.ttht",'<div id="fx.transaction.waiting.tab.ttht" ng-controller="fx.transaction.waiting.tab.ttht"> <div ng-include src="\'function.buttons.edit\'" ng-if="ModelData.IsAddNew && ModelData.IsStatus"></div> <div class="qe-heading">{{translation.lblInfoTTHTDetail}}</div> <form role="form" name="Ctrl_FX_Transaction_Waiting_Tab_Ttht"> \x3c!-- Thong tin NGOAI TE --\x3e <div class="qe-heading bold"> {{ModelData.Account1}} <span ng-if="ModelData.IsViewPlus2">({{translation.lbl_Chan1}})</span> </div>  \x3c!--thanh toan tien mat--\x3e <div class="qe-table"> \x3c!-- Tai khoan Ghi Nợ --\x3e <div class="form-group"> <label class="col-xs-4"> {{translation.Form_ListSynchronization_AccountIdDr}}<span ng-if="!ModelData.IsViewMode">{{translation.IsNotNull}}</span></label> <div class="col-xs-8"> <div class="input-group"> <input type="text" ng-disabled="ModelData.IsViewMode || ModelData.IsSuaHachToanChan2|| ModelData.IsSuaFtGhiCo|| ModelData.IsKhongChoSua" class="form-control" ng-blur="ModelData.TKNTGhiNoNameUpdate()" placeholder="{{translation.lbl_TKKH_Select_tkNgoaite}}" ng-model="ModelData.GhiNo_NgoaiTe" focus="{{ModelData.IsFocusTM_TaiKhoanVang}}" new-validation="\'required\'" ng-readonly="ModelData.isReadOnlyGhiNo_NgoaiTe"/> <span class="input-group-btn"> <button class="glyphicon glyphicon-search" ng-disabled="ModelData.IsViewMode || ModelData.isReadOnlyGhiNo_NgoaiTe" ng-readonly="ModelData.isReadOnlyGhiNo_NgoaiTe" ng-click="ModelData.Find_GhiNo_NgoaiTe()"> </button> </span> </div> </div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiNo_NgoaiTe"> <div>{{translation.accountDecrease}}</div> <div>{{ModelData.TKNTGhiNoName}}</div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiNo_NgoaiTe"> <div>{{translation.amountDecrease}}</div> <div> <div class="input-group"> <div class="input-group-addon">{{ModelData.FxBaseSymbolInfo.Currency}}</div> <input type="text" readonly ng-if="!ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityMua:InfoModelData.QuantityBan}}"> <input type="text" readonly ng-if="ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityMua2:InfoModelData.QuantityBan2}}"> </div> </div> </div>  \x3c!-- Tai khoan Ghi Có --\x3e <div class="form-group"> <label class="col-xs-4"> {{translation.Form_ListSynchronization_AccountIdCr}}<span ng-if="!ModelData.IsViewMode">{{translation.IsNotNull}}</span></label> <div class="col-xs-8"> <div class="input-group"> <input type="text" ng-disabled="ModelData.IsViewMode || (!ModelData.IsSuaFtGhiCo && ModelData.IsSuaHachToanChan2)|| ModelData.IsKhongChoSua" class="form-control" ng-blur="ModelData.TKNTGhiCoNameUpdate()" placeholder="{{translation.lbl_TKKH_Select_tkNgoaite}}" ng-model="ModelData.GhiCo_NgoaiTe" focus="{{ModelData.IsFocusTM_TaiKhoanTien}}" new-validation="\'required\'" ng-readonly="ModelData.isReadOnlyGhiCo_NgoaiTe"/> <span class="input-group-btn"> <button class="glyphicon glyphicon-search" ng-disabled="ModelData.IsViewMode || ModelData.isReadOnlyGhiCo_NgoaiTe" ng-readonly="ModelData.isReadOnlyGhiCo_NgoaiTe" ng-click="ModelData.Find_GhiCo_NgoaiTe()"> </button> </span> </div> </div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiCo_NgoaiTe"> <div>{{translation.accountIncrease}}</div> <div>{{ModelData.TKNTGhiCoName}}</div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiCo_NgoaiTe"> <div>{{translation.amountIncrease}}</div> <div> <div class="input-group"> <div class="input-group-addon">{{ModelData.FxBaseSymbolInfo.Currency}}</div> <input type="text" readonly ng-if="!ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityMua:InfoModelData.QuantityBan}}"> <input type="text" readonly ng-if="ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityMua2:InfoModelData.QuantityBan2}}"> </div> </div> </div> </div>   \x3c!-- Thong tin VND --\x3e <div class="qe-heading bold"> {{ModelData.Account2}} <span ng-if="ModelData.IsViewPlus2">({{translation.lbl_Chan1}})</span> </div>  <div class="qe-table"> \x3c!-- Tai khoan Ghi Nợ --\x3e <div class="form-group"> <label class="col-xs-4"> {{translation.Form_ListSynchronization_AccountIdDr}}<span ng-if="!ModelData.IsViewMode">{{translation.IsNotNull}}</span></label> <div class="col-xs-8"> <div class="input-group"> <input type="text" ng-disabled="ModelData.IsViewMode || ModelData.IsSuaHachToanChan2|| ModelData.IsSuaFtGhiCo|| ModelData.IsKhongChoSua" class="form-control" ng-blur="ModelData.TKGhiNoNameUpdate()" placeholder="{{translation.lbl_TKTechcombank_Select_tkVND}}" ng-model="ModelData.GhiNo_Vnd" focus="{{ModelData.IsFocusCK_In_TaiKhoanVang}}" new-validation="\'required\'" ng-readonly="ModelData.isReadOnlyGhiNo_Vnd"/> <span class="input-group-btn"> <button class="glyphicon glyphicon-search" ng-disabled="ModelData.IsViewMode || ModelData.isReadOnlyGhiNo_Vnd" ng-readonly="ModelData.isReadOnlyGhiNo_Vnd" ng-click="ModelData.Find_GhiNo_Vnd()"> </button> </span> </div> </div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiNo_Vnd"> <div>{{translation.accountDecrease}}</div> <div>{{ModelData.TKGhiNoName}}</div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiNo_Vnd"> <div>{{translation.amountDecrease}}</div> <div> <div class="input-group"> <div class="input-group-addon">{{ModelData.FxBaseSymbolInfo.PosCurrency}}</div> <input type="text" readonly ng-if="!ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityBan:InfoModelData.QuantityMua}}"> <input type="text" readonly ng-if="ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityBan2:InfoModelData.QuantityMua2}}"> </div> </div> </div>  \x3c!-- Tai khoan Ghi Có --\x3e <div class="form-group"> <label class="col-xs-4"> {{translation.Form_ListSynchronization_AccountIdCr}}<span ng-if="!ModelData.IsViewMode">{{translation.IsNotNull}}</span></label> <div class="col-xs-8"> <div class="input-group"> <input type="text" ng-disabled="ModelData.IsViewMode || (!ModelData.IsSuaFtGhiCo && ModelData.IsSuaHachToanChan2)|| ModelData.IsKhongChoSua" class="form-control" ng-blur="ModelData.TKGhiCoNameUpdate()" placeholder="{{translation.lbl_TKTechcombank_Select_tkVND}}" ng-model="ModelData.GhiCo_Vnd" focus="{{ModelData.IsFocusCK_In_TaiKhoanTien}}" new-validation="\'required\'" ng-readonly="ModelData.isReadOnlyGhiCo_Vnd"/>  <span class="input-group-btn"> <button class="glyphicon glyphicon-search" ng-disabled="ModelData.IsViewMode || ModelData.isReadOnlyGhiCo_Vnd" ng-readonly="ModelData.isReadOnlyGhiCo_Vnd" ng-click="ModelData.Find_GhiCo_Vnd()"> </button> </span> </div> </div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiCo_Vnd"> <div>{{translation.accountIncrease}}</div> <div>{{ModelData.TKGhiCoName}}</div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiCo_Vnd"> <div>{{translation.amountIncrease}}</div> <div> <div class="input-group"> <div class="input-group-addon">{{ModelData.FxBaseSymbolInfo.PosCurrency}}</div> <input type="text" readonly ng-if="!ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityBan:InfoModelData.QuantityMua}}"> <input type="text" readonly ng-if="ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityBan2:InfoModelData.QuantityMua2}}"> </div> </div> </div> </div>  <div ng-if="ModelData.IsViewPlus2"> \x3c!-- Chan 2 --\x3e  \x3c!-- Thong tin VND --\x3e <div class="qe-heading bold"> {{ModelData.Account2}} <span ng-if="ModelData.IsViewPlus2">({{translation.lbl_Chan2}})</span> </div>  <div class="qe-table"> \x3c!-- Tai khoan Ghi Nợ --\x3e <div class="form-group"> <label class="col-xs-4"> {{translation.Form_ListSynchronization_AccountIdDr}}<span ng-if="!ModelData.IsViewMode">{{translation.IsNotNull}}</span></label> <div class="col-xs-8"> <div class="input-group"> <input type="text" ng-disabled="ModelData.IsViewMode|| ModelData.IsSuaHachToanChan1|| ModelData.IsSuaFtGhiCo2 ||ModelData.IsKhongChoSua2" class="form-control" ng-blur="ModelData.TKGhiNoName2Update()" placeholder="{{translation.lbl_TKTechcombank_Select_tkVND}}" ng-model="ModelData.GhiNo_Vnd2" focus="{{ModelData.IsFocusCK_In_TaiKhoanVang}}" new-validation="\'required\'" ng-readonly="ModelData.isReadOnlyGhiNo_Vnd2"/> <span class="input-group-btn"> <button class="glyphicon glyphicon-search" ng-disabled="ModelData.IsViewMode || ModelData.isReadOnlyGhiNo_Vnd2" ng-readonly="ModelData.isReadOnlyGhiNo_Vnd2" ng-click="ModelData.Find_GhiNo_Vnd(true)"> </button> </span> </div> </div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiNo_Vnd2"> <div>{{translation.accountDecrease}}</div> <div>{{ModelData.TKGhiNoName2}}</div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiNo_Vnd2"> <div>{{translation.amountDecrease}}</div> <div> <div class="input-group"> <div class="input-group-addon">{{ModelData.FxBaseSymbolInfo.PosCurrency}}</div> <input type="text" readonly ng-if="ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityBan:InfoModelData.QuantityMua}}"> <input type="text" readonly ng-if="!ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityBan2:InfoModelData.QuantityMua2}}"> </div> </div> </div>  \x3c!-- Tai khoan Ghi Có --\x3e <div class="form-group"> <label class="col-xs-4"> {{translation.Form_ListSynchronization_AccountIdCr}}<span ng-if="!ModelData.IsViewMode">{{translation.IsNotNull}}</span></label> <div class="col-xs-8"> <div class="input-group"> <input type="text" ng-disabled="ModelData.IsViewMode|| ModelData.IsSuaHachToanChan1 || ModelData.IsKhongChoSua2" class="form-control" ng-blur="ModelData.TKGhiCoName2Update()" placeholder="{{translation.lbl_TKTechcombank_Select_tkVND}}" ng-model="ModelData.GhiCo_Vnd2" focus="{{ModelData.IsFocusCK_In_TaiKhoanTien}}" new-validation="\'required\'" ng-readonly="ModelData.isReadOnlyGhiCo_Vnd2"/>  <span class="input-group-btn"> <button class="glyphicon glyphicon-search" ng-disabled="ModelData.IsViewMode || ModelData.isReadOnlyGhiCo_Vnd2" ng-readonly="ModelData.isReadOnlyGhiCo_Vnd2" ng-click="ModelData.Find_GhiCo_Vnd(true)"> </button> </span> </div> </div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiCo_Vnd2"> <div>{{translation.accountIncrease}}</div> <div>{{ModelData.TKGhiCoName2}}</div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiCo_Vnd2"> <div>{{translation.amountIncrease}}</div> <div> <div class="input-group"> <div class="input-group-addon">{{ModelData.FxBaseSymbolInfo.PosCurrency}}</div> <input type="text" readonly ng-if="ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityBan:InfoModelData.QuantityMua}}"> <input type="text" readonly ng-if="!ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityBan2:InfoModelData.QuantityMua2}}"> </div> </div> </div> </div> \x3c!--thanh toan tien mat--\x3e <div class="qe-heading bold"> {{ModelData.Account1}} <span ng-if="ModelData.IsViewPlus2">({{translation.lbl_Chan2}})</span> </div> <div class="qe-table"> \x3c!-- Tai khoan Ghi Nợ --\x3e <div class="form-group"> <label class="col-xs-4"> {{translation.Form_ListSynchronization_AccountIdDr}}<span ng-if="!ModelData.IsViewMode">{{translation.IsNotNull}}</span></label> <div class="col-xs-8"> <div class="input-group"> <input type="text" ng-disabled="ModelData.IsViewMode|| ModelData.IsSuaHachToanChan1|| ModelData.IsSuaFtGhiCo2||ModelData.IsKhongChoSua2" class="form-control" ng-blur="ModelData.TKNTGhiNoName2Update()" placeholder="{{translation.lbl_TKKH_Select_tkNgoaite}}" ng-model="ModelData.GhiNo_NgoaiTe2" focus="{{ModelData.IsFocusTM_TaiKhoanVang}}" new-validation="\'required\'" ng-readonly="ModelData.isReadOnlyGhiNo_NgoaiTe2"/>  <span class="input-group-btn"> <button class="glyphicon glyphicon-search" ng-disabled="ModelData.IsViewMode || ModelData.isReadOnlyGhiNo_NgoaiTe2" ng-readonly="ModelData.isReadOnlyGhiNo_NgoaiTe2" ng-click="ModelData.Find_GhiNo_NgoaiTe(true)"> </button> </span> </div> </div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiNo_NgoaiTe2"> <div>{{translation.accountDecrease}}</div> <div>{{ModelData.TKNTGhiNoName2}}</div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiNo_NgoaiTe2"> <div>{{translation.amountDecrease}}</div> <div> <div class="input-group"> <div class="input-group-addon">{{ModelData.FxBaseSymbolInfo.Currency}}</div> <input type="text" readonly ng-if="ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityMua:InfoModelData.QuantityBan}}"> <input type="text" readonly ng-if="!ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityMua2:InfoModelData.QuantityBan2}}"> </div> </div> </div>  \x3c!-- Tai khoan Ghi Có --\x3e <div class="form-group"> <label class="col-xs-4"> {{translation.Form_ListSynchronization_AccountIdCr}}<span ng-if="!ModelData.IsViewMode">{{translation.IsNotNull}}</span></label> <div class="col-xs-8"> <div class="input-group"> <input type="text" ng-disabled="ModelData.IsViewMode|| ModelData.IsSuaHachToanChan1||ModelData.IsKhongChoSua2" class="form-control" ng-blur="ModelData.TKNTGhiCoName2Update()" placeholder="{{translation.lbl_TKKH_Select_tkNgoaite}}" ng-model="ModelData.GhiCo_NgoaiTe2" focus="{{ModelData.IsFocusTM_TaiKhoanTien}}" new-validation="\'required\'" ng-readonly="ModelData.isReadOnlyGhiCo_NgoaiTe2"/>  <span class="input-group-btn"> <button class="glyphicon glyphicon-search" ng-disabled="ModelData.IsViewMode || ModelData.isReadOnlyGhiCo_NgoaiTe2" ng-readonly="ModelData.isReadOnlyGhiCo_NgoaiTe2" ng-click="ModelData.Find_GhiCo_NgoaiTe(true)"> </button> </span> </div> </div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiCo_NgoaiTe2"> <div>{{translation.accountIncrease}}</div> <div>{{ModelData.TKNTGhiCoName2}}</div> </div>  <div class="row" ng-if="!ModelData.isReadOnlyGhiCo_NgoaiTe2"> <div>{{translation.amountIncrease}}</div> <div> <div class="input-group"> <div class="input-group-addon">{{ModelData.FxBaseSymbolInfo.Currency}}</div> <input type="text" readonly ng-if="ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityMua:InfoModelData.QuantityBan}}"> <input type="text" readonly ng-if="!ModelData.IsLenhChan2" value="{{ModelData.isBuy?InfoModelData.QuantityMua2:InfoModelData.QuantityBan2}}"> </div> </div> </div> </div>  </div>  \x3c!-- Dien giai --\x3e <div class="qe-table"> <div class="form-group"> <label class="col-xs-4">{{translation.Form_TabTransactionInfo_Description}}</label> <div class="col-xs-8"> <div class="input-group"> <textarea class="form-control" ng-disabled="ModelData.IsViewMode|| ModelData.IsSuaHachToanChan1|| ModelData.IsSuaFtGhiCo|| ModelData.IsSuaFtGhiCo2" ng-attr-placeholder="{{translation.Form_TabTransactionInfo_Description}}" ng-model="ModelData.Description" validation-error-to="ModelData_Fx_Order_Branch_Description_Error" new-validation="\'kytudacbiet\'" name="ModelData_Fx_Order_Branch_Description"></textarea> </div> </div> </div> </div> </form>  <div class="qe-appro-button"> <button class="btn btn-primary btn-sm" ng-show="ModelData.IsViewBtnUpdate && ModelData.IsAddNew" ng-click="ModelData.SaveFunctionClick()"> <i class="glyphicon glyphicon-floppy-disk"></i>{{translation.BUTTON_SAVE}}   </button> <button class="btn btn-warning btn-sm" ng-show="ModelData.IsViewBtnUpdate && ModelData.IsAddNew" ng-click="ModelData.CancelFunctionClick()"> <i class="glyphicon glyphicon-remove"></i>{{translation.BUTTON_CANCLE}}   </button> <button ng-show="ModelData.AllowedReject" class="btn btn-danger btn-sm" ng-click="ModelData.RejectFunctionClick()"> <i class="glyphicon glyphicon-trash"></i>{{translation.RejectTTHT}}   </button> <button class="btn btn-primary btn-sm" ng-show="!ModelData.IsAddNew" ng-click="ModelData.SaveFunctionClick()"> <i class="glyphicon glyphicon-floppy-disk"></i>{{translation.BUTTON_SAVE1}}   </button> <button class="btn btn-warning btn-sm" ng-show="!ModelData.IsAddNew" ng-click="ModelData.ClearFunctionClick()"> <i class="glyphicon glyphicon-remove"></i>{{translation.BUTTON_CLEAR}}   </button> </div> </div>');