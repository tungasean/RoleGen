DELETE RoleGroup;  
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'SnD.SCN_GDV', '1', '1', N'SnD.SCN_GDV', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'SnD.SCN_GDV');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'SnD.SCN_TTQT', '1', '1', N'SnD.SCN_TTQT', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'SnD.CNDN_RM', '1', '1', N'SnD.CNDN_RM', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'SnD.CNDN_RM');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'SnD.CNDN_GDV', '1', '1', N'SnD.CNDN_GDV', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'SnD.CNC_GDV', '1', '1', N'SnD.CNC_GDV', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'SnD.CNC_GDV');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'SND.GDV', '1', '1', N'SND.GDV', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'SND.GDV');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'SND.KSV', '1', '1', N'SND.KSV', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'SND.KSV');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'SND.THUQUY', '1', '1', N'SND.THUQUY', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'SND.THUQUY');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'SND.BAOCAO', '1', '1', N'SND.BAOCAO', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'SND.BAOCAO');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'WB.NHANLENH(MMDVACIB)', '1', '1', N'WB.NHANLENH(MMDVACIB)', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'WB.NHANLENH(MMDVACIB)');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'KNV.TRADER', '1', '1', N'KNV.TRADER', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'KNV.TRADER');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'KNV.TRADERMANAGER', '1', '1', N'KNV.TRADERMANAGER', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'KNV.SALE', '1', '1', N'KNV.SALE', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'KNV.SALE');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'KNV.SALEMANAGER', '1', '1', N'KNV.SALEMANAGER', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'KNV.BSM', '1', '1', N'KNV.BSM', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'KNV.BSM');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'KVH.TREAOPS.CV', '1', '1', N'KVH.TREAOPS.CV', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'KVH.TREAOPS.KSV', '1', '1', N'KVH.TREAOPS.KSV', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'QTRR.CV', '1', '1', N'QTRR.CV', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'QTRR.CV');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'TCKH.TFC.CV', '1', '1', N'TCKH.TFC.CV', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'TCKH.TFC.CV');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'WB.WBS', '1', '1', N'WB.WBS', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'WB.WBS');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'ADMIN', '1', '1', N'ADMIN', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'ADMIN');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'OT.ANTT', '1', '1', N'OT.ANTT', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'OT.ANTT');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'OT.VHUD.READONLY', '1', '1', N'OT.VHUD.READONLY', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'OT.ITO.VHUD.OPS', '1', '1', N'OT.ITO.VHUD.OPS', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS');
INSERT INTO RoleGroup (Name, RoleGroupType, Status, Description, ActorChanged, TimeChanged, IsPendingChange) SELECT N'OT.DVKH', '1', '1', N'OT.DVKH', '1', GETDATE(), '0' WHERE NOT EXISTS (SELECT 1 FROM RoleGroup WHERE Name = 'OT.DVKH');
TRUNCATE TABLE Role;
TRUNCATE TABLE RoleGroupRef;
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Info_SendNotify',N'Gửi tin nhắn hệ thống', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_SendNotify'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Info_ViewNotify',N'Xem tin nhắn hệ thống', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ViewNotify'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Info_ActionLog',N'Xem nhật ký thao tác hệ thống', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ActionLog'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Config_OtpCode',N'Cấu hình hiệu lực mã xác thực', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_OtpCode';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_OtpCode') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_OtpCode') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_OtpCode'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_OtpCode') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_OtpCode') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_OtpCode'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Config_Time_Lock',N'Cấu hình khóa ứng dụng', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Time_Lock'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Config_Session',N'Xem cấu hình ngày phiên', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Config_Session_Update',N'Cấu hình ngày phiên', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Session_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Config_Warning_Session',N'Cấu hình cảnh báo kết thúc ngày phiên', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Warning_Session';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Warning_Session') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Warning_Session') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Warning_Session'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Config_Warning_Session') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Config_Warning_Session') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Config_Warning_Session'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Holiday_Type_List_View',N'Xem cấu hình quản lý lịch', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Calendar_Add',N'Cập nhật lịch', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Add';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Add'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Calendar_Update',N'Thêm mới lịch', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Approval_System_Calendar_AddOrUpdate',N'Phê duyệt tạo mới cập nhật lịch', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Approval_System_Calendar_AddOrUpdate';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Approval_System_Calendar_AddOrUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Approval_System_Calendar_AddOrUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Approval_System_Calendar_AddOrUpdate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Approval_System_Calendar_AddOrUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Approval_System_Calendar_AddOrUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Approval_System_Calendar_AddOrUpdate'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Holiday_Type_List_View_Currency',N'Xem cấu hình quản lý lịch/ngoại tệ', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Holiday_Type_List_View_Currency'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Calendar_HolidayAssiged',N'Cập nhật gán lịch/ngoại tệ', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_HolidayAssiged';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_HolidayAssiged') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_HolidayAssiged') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_HolidayAssiged'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_HolidayAssiged') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_HolidayAssiged') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_HolidayAssiged'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_HolidayAssiged') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_HolidayAssiged') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_HolidayAssiged'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Calendar_Update_Holiday',N'Cập nhật ngày nghỉ, làm việc', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Calendar_Update_Holiday'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_ConfigApproval',N'Xem danh sách phê duyệt phiên/ngày nghỉ', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_ConfigApproval_Approval',N'Phê duyệt phiên/ngày nghỉ', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApproval_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_ConfigApprovalHoliday_Approval',N'Phê duyệt cập nhật ngày nghỉ, làm việc', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalHoliday_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalHoliday_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalHoliday_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalHoliday_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalHoliday_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalHoliday_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalHoliday_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalHoliday_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalHoliday_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalHoliday_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Pause',N'Tạm dừng/khôi phục hoạt động hệ thống', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Pause';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'System_Pause') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Pause') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Pause'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_Pause') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Pause') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Pause'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Pause') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Pause') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Pause'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Pause') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Pause') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Pause'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Approval_T24_Confing',N'Cấu hình tự động phê duyệt bút toán T24', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Approval_T24_Confing';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Approval_T24_Confing') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Approval_T24_Confing') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Approval_T24_Confing'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Approval_T24_Confing') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Approval_T24_Confing') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Approval_T24_Confing'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Approval_T24_Confing') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Approval_T24_Confing') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Approval_T24_Confing'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Liveboard',N'Xem bảng giá Liveboard FX', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Liveboard_Exchange',N'Xem bảng giá Liveboard Vàng-FE', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Exchange'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Liveboard_Update',N'ALL - Thiết lập Margin Liveboard', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Liveboard_Config',N'ALL - Cấu hình hiển thị Liveboard', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Liveboard_Config'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Customer_Group_Allow_Order',N'FX - Cập nhật nhóm KH đặt lệnh CN', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Customer_Group_Allow_Order_View',N'FX - Xem danh sách nhóm KH đặt lệnh CN', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_Group_Allow_Order_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ListArea_View',N'Xem danh sách miền', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListArea_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Area_Addnew',N'Tạo/cập nhật miền', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Area_Addnew';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Area_Addnew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Area_Addnew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Area_Addnew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Area_Addnew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Area_Addnew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Area_Addnew'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ListBrand_View',N'Xem danh sách vùng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListBrand_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Brand_AddNew',N'Tạo/cập nhật vùng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_AddNew';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_AddNew'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_AreaBrand_View',N'Xem danh sách chi nhánh thuộc vùng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AreaBrand_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_AutoSale_Assign_Edit',N'Gán AutoTrader', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AutoSale_Assign_Edit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_AutoSale_Assign_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AutoSale_Assign_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AutoSale_Assign_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_AutoSale_Assign_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AutoSale_Assign_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AutoSale_Assign_Edit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ListAutoTraderAutoSale_Manager',N'Xem danh sách AutoTrader', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ListAutoTraderAutoSale_Manager'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_User_Approval_Area_Brand',N'Xem danh sách phê duyệt miền, vùng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Approval_Area_Brand'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_User_Area_Approval',N'Phê duyệt tạo/cập nhật miền', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Area_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_Area_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Area_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_Area_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_Area_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Area_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_Area_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_User_Brand_Approval',N'Phê duyệt tạo/cập nhật vùng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Brand_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_Brand_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Brand_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_Brand_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_Brand_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Brand_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_Brand_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ClientList',N'Xem danh sách chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientList'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Client_AddNew',N'Tạo/cập nhật chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_AddNew';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_AddNew'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Client_Approval',N'Phê duyệt tạo/cập nhật chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ClientMemberList',N'Xem danh sách người dùng chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMemberList'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ClientMember_AddNew',N'Tạo/cập nhật người dùng chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_AddNew';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_AddNew'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ClientMember_Approval',N'Phê duyệt tạo/cập nhật người dùng chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientMember_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ClientAccountList',N'Xem thông tin tài khoản chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountList'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ClientAccountUpdate',N'Tạo/cập nhật tài khoản chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientAccountUpdate'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_User_Login_Branch_List',N'Xem danh sách người dùng đăng nhập chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_User_Login_Branch_Add',N'Tạo/cập nhật người dùng đăng nhập chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Add';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Add'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_User_Login_Branch_Approval',N'Phê duyệt tạo/cập nhật người dùng đăng nhập chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Branch_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserClientLoginViewDetail',N'Xem thông tin đăng nhập người dùng đăng nhập chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginViewDetail'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserClientLoginView_Update',N'Tạo/cập nhật thông tin đăng nhập người dùng đăng nhập chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserClientLoginView_Approval',N'Phê duyệt tạo/cập nhật thông tin đăng nhập người dùng đăng nhập chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginView_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserClientLoginAssignRoleForUser',N'Xem phân quyền người dùng đăng nhập chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserClientLoginAssignRoleForUser_Update',N'Gán nhóm quyền cho người dùng đăng nhập chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserClientLoginAssignRoleForUser_Approval',N'Phê duyệt gán nhóm quyền cho người dùng đăng nhập chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUser_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_User_Branch_Assign_UserInfo',N'Xem thông tin gán chi nhánh cho người dùng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_Branch_Assign_UserInfo'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserClientMemberAssign_Approval',N'Phê duyệt gán chi nhánh cho người dùng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientMemberAssign_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserClientMemberAssign_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientMemberAssign_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientMemberAssign_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserClientMemberAssign_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientMemberAssign_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientMemberAssign_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserClientMemberAssign_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientMemberAssign_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientMemberAssign_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserClientLoginAssignRoleForUserOnly',N'Gán chi nhánh cho từng người dùng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUserOnly';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUserOnly') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUserOnly') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUserOnly'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUserOnly') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUserOnly') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUserOnly'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUserOnly') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUserOnly') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserClientLoginAssignRoleForUserOnly'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Branch_Assign_List',N'Xem danh sách người dùng nhiều chi nhánh', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Branch_Assign_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Customer_List_Group',N'Xem danh sách nhóm khách hàng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Customer_List_Group_Add',N'Tạo/cập nhật nhóm khách hàng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Add';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Add'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Customer_List_Group_Approval',N'Phê duyệt tạo/cập nhật nhóm khách hàng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Customer_List_Group_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Member_Customer_List_View',N'Xem danh sách khách hàng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_List_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Member_Customer_AddNew',N'Thêm mới khách hàng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Member_Customer_AddNew'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'MemberCustomerBizLineConfig_Edit',N'Đồng bộ thông tin khách hàng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerBizLineConfig_Edit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'MemberCustomerViewCustomerInfo',N'Xem thông tin tài khoản khách hàng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'MemberCustomerViewCustomerInfo'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'SegmentListView',N'Xem danh sách khách hàng trong phân khúc', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'SegmentListView';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'SegmentListView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'SegmentListView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'SegmentListView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'SegmentListView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'SegmentListView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'SegmentListView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'SegmentListView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'SegmentListView'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Client_PhanKhuc_Addnew',N'Tạo thông tin phân khúc', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Addnew'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Client_PhanKhuc_Update',N'Cập nhật thông tin phân khúc', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Client_PhanKhuc_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ClientPhanKhucList',N'Xem thông tin phân khúc', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ClientPhanKhucList'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_AdminList',N'Xem danh sách nhóm quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminList';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminList'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Admin_AddNew',N'Tạo/cập nhật nhóm quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Admin_AddNew';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Admin_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Admin_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Admin_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Admin_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Admin_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Admin_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Admin_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Admin_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Admin_AddNew'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Admin_Approval',N'Phê duyệt tạo/cập nhật nhóm quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Admin_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Admin_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Admin_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Admin_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Admin_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Admin_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Admin_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Admin_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Admin_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Admin_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_AdminMemberList',N'Xem danh sách người dùng quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMemberList'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_AdminMember_AddNew',N'Tạo/cập nhật người dùng quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_AddNew';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_AddNew'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_AddNew') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_AddNew') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_AddNew'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_AdminMember_Approval',N'Phê duyệt tạo/cập nhật người dùng quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_AdminMember_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_User_Login_Admin_List',N'Xem danh sách người dùng đăng nhập quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_User_Login_Admin_Add',N'Tạo/cập nhật người dùng đăng nhập quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Add';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Add'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_User_Login_Admin_Approval',N'Phê duyệt tạo/cập nhật người dùng đăng nhập quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Login_Admin_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserAdminLoginViewDetail',N'Xem thông tin đăng nhập người dùng đăng nhập quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginViewDetail'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserAdminLoginView_Update',N'Tạo/cập nhật thông tin đăng nhập người dùng đăng nhập quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserAdminLoginView_Approval',N'Phê duyệt tạo/cập nhật thông tin đăng nhập người dùng đăng nhập quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginView_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserAdminLoginAssignRoleForUser',N'Xem phân quyền người dùng đăng nhập quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserAdminLoginAssignRoleForUser_Update',N'Gán nhóm quyền cho người dùng đăng nhập quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'UserAdminLoginAssignRoleForUser_Approval',N'Phê duyệt gán nhóm quyền cho người dùng đăng nhập quản trị', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'UserAdminLoginAssignRoleForUser_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Brand_Assign',N'Xem danh sách gán vùng quản lý', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Brand_Assign_Update',N'Gán vùng quản lý', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Brand_Assign_Approval',N'Phê duyệt gán vùng quản lý', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Brand_Assign_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Role_Group_List',N'Xem danh sách nhóm quyền', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Role_Group_Update',N'Tạo/cập nhật nhóm quyền', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Role_Group_Approval',N'Phê duyệt tạo/cập nhật nhóm quyền', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_Group_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'AssignRoleForGroupView',N'Xem thông tin gán quyền cho nhóm quyền', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroupView'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'AssignRoleForGroup_Update',N'Gán quyền cho nhóm quyền', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'AssignRoleForGroup_Approval',N'Phê duyệt gán quyền cho nhóm quyền', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'AssignRoleForGroup_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Role_View',N'Xem danh sách người dùng của nhóm quyền', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Role_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Role_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Role_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_User_View',N'Xem danh sách nhóm quyền/người dùng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Role_User_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_User_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_User_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_Info_ListUserLogin',N'Xem danh sách đăng nhập hệ thống', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ANTT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_Info_ListUserLogin'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Transaction_Source_Success_List_New',N'Xem theo dõi nguồn', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Transaction_Source_Success_List_New'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListApprovalMember',N'Xem danh sách phê duyệt người dùng', '1', '0', GETDATE(), '201' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalMember'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_User_Order_List',N'Xem danh sách người đặt lệnh ngoài giờ giao dịch', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_User_Order_List_Add',N'Sửa danh sách người đặt lệnh ngoài giờ giao dịch', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List_Add';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_User_Order_List_Add'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_ConfigSettlementPriceApproval',N'Vàng - Nhận thông báo giá vàng SJC', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigSettlementPriceApproval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_ConfigApprovalSjc',N'Vàng - Phê duyệt giá vàng SJC', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigApprovalSjc'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Gold_Price_Referent',N'Vàng - Xem nguồn giá vàng SJC', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Gold_Price_Referent_His',N'Vàng - Xem lịch sử giá vàng SJC', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_His'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_Gold_Price_Referent_Update',N'Vàng - Cập nhật giá vàng SJC', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_Gold_Price_Referent_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListSysmbolPrice_Update',N'Vàng - Cập nhật giá giao dịch', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Price_CostPrice_His',N'Vàng - Xem lịch sử cập nhật giá giao dịch', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListSysmbolPrice_Update_Approval',N'Vàng - Phê duyệt giá giao dịch', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'GO_PriceTable_ViewBranch',N'Vàng - Xem bảng giá chi nhánh/Hội sở', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_PriceTable_ViewBranch'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Price_Commission_Price',N'Vàng - Thiết lập hoa hồng chi nhánh', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Risk_Trading_Limit_List',N'Vàng - Thiết lập hạn mức một giao dịch', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Trading_Limit_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Risk_Trading_Limit_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Trading_Limit_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_Trading_Limit_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Risk_Trading_Limit_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Trading_Limit_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_Trading_Limit_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'View_PositionTradingLimit',N'Vàng - Thiết lập hạn mức trạng thái', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'View_PositionTradingLimit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'View_PositionTradingLimit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'View_PositionTradingLimit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'View_PositionTradingLimit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'View_PositionTradingLimit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'View_PositionTradingLimit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'View_PositionTradingLimit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_Price_Trading_Limit_List',N'Vàng - Thiết lập hạn mức giá', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Risk_StopLoss_Trading_Limit',N'Vàng - Thiết lập hạn mức lỗ', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_StopLoss_Trading_Limit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Risk_StopLoss_Trading_Limit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_StopLoss_Trading_Limit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_StopLoss_Trading_Limit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Risk_StopLoss_Trading_Limit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_StopLoss_Trading_Limit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_StopLoss_Trading_Limit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Risk_Price_Trading_Limit_His',N'Vàng - Xem lịch sử vi phạm biên độ giá', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_Price_Trading_Limit_His'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Price_Limit_List_Approval',N'Vàng - Xem danh sách phê duyệt hạn mức', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Limit_List_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Risk_UpdateTradingLimit_Approval',N'Vàng - Phê duyệt hạn mức một giao dịch', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateTradingLimit_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateTradingLimit_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateTradingLimit_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateTradingLimit_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateTradingLimit_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateTradingLimit_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateTradingLimit_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Risk_UpdatePositionTradingLimit_Approval',N'Vàng - Phê duyệt hạn mức trạng thái', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePositionTradingLimit_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePositionTradingLimit_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePositionTradingLimit_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePositionTradingLimit_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePositionTradingLimit_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePositionTradingLimit_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePositionTradingLimit_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Risk_UpdatePriceTradingLimit_Approval',N'Vàng - Phê duyệt hạn mức giá', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePriceTradingLimit_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePriceTradingLimit_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePriceTradingLimit_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePriceTradingLimit_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePriceTradingLimit_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePriceTradingLimit_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdatePriceTradingLimit_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Risk_UpdateStoplossTradingLimit_Approval',N'Vàng - Phê duyệt hạn mức lỗ', '1', '0', GETDATE(), '202' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateStoplossTradingLimit_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateStoplossTradingLimit_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateStoplossTradingLimit_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateStoplossTradingLimit_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateStoplossTradingLimit_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateStoplossTradingLimit_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_UpdateStoplossTradingLimit_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_OrderInputHo_Menu',N'Vàng - Đặt lệnh hội sở', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputHo_Menu';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputHo_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputHo_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputHo_Menu'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputHo_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputHo_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputHo_Menu'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_OrderInputBranch_Menu',N'Vàng - Đặt lệnh chi nhánh', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_OrderInputBranch_Menu'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_TransactionSuccess_BillingNumber',N'Vàng - Nhập/Sửa số hóa đơn', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_TransactionSuccess_BillingNumber';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_TransactionSuccess_BillingNumber') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_TransactionSuccess_BillingNumber') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_TransactionSuccess_BillingNumber'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_TransactionSuccess_BillingNumber') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_TransactionSuccess_BillingNumber') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_TransactionSuccess_BillingNumber'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_HachToanHopDongHachToan_Edit',N'Vàng - Nhập hạch toán/hợp đồng hạch toán', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanHopDongHachToan_Edit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_SuaTTKhachHang',N'Vàng - Sửa thông tin khách hàng', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTKhachHang'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_SuaHachToan_HDHachToan',N'Vàng - Sửa hạch toán/hợp đồng hạch toán', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaHachToan_HDHachToan'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_SuaTTGiaoNhan',N'Vàng - Sửa thông tin giao nhận', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SuaTTGiaoNhan'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_Accounting_Delete',N'Vàng - Huỷ hạch toán/hợp đồng hạch toán', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'GoldStore_TransactionAll_View',N'Vàng - Xem danh sách giao dịch tất cả lệnh', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_TransactionAll_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListOrder_TradingRequote_View',N'Vàng - Xem danh sách giao dịch chờ thỏa thuận', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_TradingRequote_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_RequoteToBranch',N'Vàng - Thỏa thuận giá với chi nhánh', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_RequoteToBranch';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_RequoteToBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_RequoteToBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_RequoteToBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_RequoteToBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_RequoteToBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_RequoteToBranch'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListApprovalOrderTransaction_View',N'Vàng - Xem danh sách phê duyệt giao dịch chi nhánh', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ApprovalHachToan_HopDongHachToan',N'Vàng - Phê duyệt hạch toán/hợp đồng hạch toán', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHachToan_HopDongHachToan';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHachToan_HopDongHachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHachToan_HopDongHachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHachToan_HopDongHachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHachToan_HopDongHachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHachToan_HopDongHachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHachToan_HopDongHachToan'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ApprovalEditThongTinKhachHang',N'Vàng - Phê duyệt sửa thông tin khách hàng', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalEditThongTinKhachHang';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalEditThongTinKhachHang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalEditThongTinKhachHang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalEditThongTinKhachHang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalEditThongTinKhachHang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalEditThongTinKhachHang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalEditThongTinKhachHang'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_Accounting_Delete_Approval',N'Vàng - Phê duyệt huỷ hạch toán/hợp đồng hạch toán', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_Accounting_Delete_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ApprovalHuyGiaoDich',N'Vàng - Chi nhánh phê duyệt hủy giao dịch', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHuyGiaoDich';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ApprovalHuyGiaoDich'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'GoldStore_GoldTransactionSyn_View',N'Vàng - Xem danh sách đồng bộ giao dịch', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldStore_GoldTransactionSyn_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_SynsFT_Before_Approval',N'Vàng - Đồng bộ FT trước thời gian tự động phê duyệt bút toán  (vàng CN và HO cá nhân)', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SynsFT_Before_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_SynsFT_Before_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_SynsFT_Before_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_SynsFT_Before_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_HO_Interbank_SynsFT_Before_Approval',N'Vàng - Đồng bộ FT trước thời gian tự động phê duyệt bút toán  (vàng HO Interbank)', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HO_Interbank_SynsFT_Before_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_HO_Interbank_SynsFT_Before_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HO_Interbank_SynsFT_Before_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_HO_Interbank_SynsFT_Before_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_HO_Interbank_SynsFT_Before_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HO_Interbank_SynsFT_Before_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_HO_Interbank_SynsFT_Before_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Risk_SettlementHo_Approval',N'Vàng - Phê duyệt hạch toán TSC', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_SettlementHo_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Risk_SettlementHo_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_SettlementHo_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_SettlementHo_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Risk_SettlementHo_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_SettlementHo_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_SettlementHo_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_Treaops_PDH_TTHT',N'Vàng - Treaops Phê duyệt hủy hạch toán TSC', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Treaops_PDH_TTHT';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Treaops_PDH_TTHT') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Treaops_PDH_TTHT') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Treaops_PDH_TTHT'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListApprovalOrderTransaction_HoApprovalReject_View',N'Vàng - Xem danh sách HO phê duyệt giao dịch', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListApprovalOrderTransaction_HoApprovalReject_Approval',N'Vàng - HO phê duyệt hủy giao dịch', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListApprovalOrderTransaction_HoApprovalReject_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ContractTSC',N'Vàng - Nhập hợp đồng TSC', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ContractTSC_CancelEdit',N'Vàng - Sửa hợp đồng TSC', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC_CancelEdit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC_CancelEdit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC_CancelEdit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC_CancelEdit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC_CancelEdit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC_CancelEdit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ContractTSC_CancelEdit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_HachToanTSC',N'Vàng - Nhập hạch toán TSC', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_AccountingTSC_CancelEdit',N'Vàng - Sửa hạch toán TSC', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_AccountingTSC_CancelEdit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_AccountingTSC_CancelEdit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_AccountingTSC_CancelEdit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_AccountingTSC_CancelEdit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_HachToanTSC_CancelEdit',N'Vàng - Hủy hạch toán TSC', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC_CancelEdit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC_CancelEdit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC_CancelEdit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC_CancelEdit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC_CancelEdit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC_CancelEdit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_HachToanTSC_CancelEdit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_Treaops_PDH',N'Vàng - Treaops phê duyệt hủy GD', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Treaops_PDH';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Treaops_PDH') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Treaops_PDH') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Treaops_PDH'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'GoldTran_TabTransaction_AllowedBranchOrderReceived',N'Vàng - Nhận giao dịch', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GoldTran_TabTransaction_AllowedBranchOrderReceived'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'GO_TabTransaction_AllowedReject',N'Vàng - Hủy giao dịch chi nhánh/hội sở', '1', '0', GETDATE(), '203' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'GO_TabTransaction_AllowedReject'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ReportLichSuGiaVang',N'Vàng - Xem báo cáo lịch sử giá vàng SJC', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportLichSuGiaVang'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_BaoCaoHanMucVar',N'Vàng - Xem báo cáo hạn mức Var', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucVar'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_BaoCaoHanMucMat',N'Vàng - Xem báo cáo hạn mức Mat', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_BaoCaoHanMucMat'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ReportHoaHongChiNhanh',N'Vàng - Xem báo cáo hoa hồng chi nhánh', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHoaHongChiNhanh'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ReportDoanhSoToanHeThong',N'Vàng - Xem báo cáo doanh số toàn hệ thống', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoToanHeThong'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ReportDoanhSoChiNhanh',N'Vàng - Xem báo cáo doanh số chi nhánh', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportDoanhSoChiNhanh'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ReportGiaoDich',N'Vàng - Xem báo cáo giao dịch', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportGiaoDich'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ReportHuyGiaoDich',N'Vàng - Xem báo cáo hủy giao dịch', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportHuyGiaoDich'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ReportSoSanhDoanhSoKDVang',N'Vàng - Xem báo cáo so sánh doanh số kinh doanh vàng', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportSoSanhDoanhSoKDVang'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Gold_ReportTongHopLaiLoKinhDoanh',N'Vàng - Xem báo cáo tổng hợp lỗ lãi kinh doanh', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Gold_ReportTongHopLaiLoKinhDoanh'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListSysmbolPrice_Update_Fx',N'FX - Cập nhật giá giao dịch', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Price_CostPrice_His_Fx',N'FX - Xem lịch sử cập nhật giá giao dịch', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_Fx'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListSysmbolPrice_Update_Fx_Approval',N'FX - Phê duyệt giá giao dịch', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_Fx_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Price_CapFloor_Hist',N'FX - Xem lịch sử giá trần sàn', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CapFloor_Hist'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_App_Menu_UpdatePip_View',N'FX - Thiết lập Pip', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_UpdatePip_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_UpdatePip_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_UpdatePip_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_UpdatePip_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_UpdatePip_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_UpdatePip_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_UpdatePip_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_App_Menu_Term_Swappoint_View',N'FX - Cấu hình Swap point', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_Term_Swappoint_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_Term_Swappoint_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_Term_Swappoint_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_Term_Swappoint_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_Term_Swappoint_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_Term_Swappoint_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_App_Menu_Term_Swappoint_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_List_SwapPoint_View',N'FX - Xem danh sách Swap point', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_List_SwapPoint_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ThamSoGiaTranSan_Create',N'FX - Cập nhật tham số giá trần sàn', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ThamSoGiaTranSan_Create';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'ThamSoGiaTranSan_Create') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ThamSoGiaTranSan_Create') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ThamSoGiaTranSan_Create'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ThamSoGiaTranSan_Create') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ThamSoGiaTranSan_Create') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ThamSoGiaTranSan_Create'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ThamSoGiaTranSan_Create') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ThamSoGiaTranSan_Create') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ThamSoGiaTranSan_Create'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Set_Margin_Limit',N'FX - Thiết lập margin', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Set_Margin_Limit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Set_Margin_Limit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Set_Margin_Limit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Set_Margin_Limit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Set_Margin_Limit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Set_Margin_Limit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Set_Margin_Limit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_Margin_Limit_List_Approval',N'FX - Phê duyệt thiết lập margin', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Margin_Limit_List_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FX_Margin_Limit_List_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Margin_Limit_List_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Margin_Limit_List_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_Margin_Limit_List_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Margin_Limit_List_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Margin_Limit_List_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_Term_Margin_View',N'FX - Thiết lập margin kỳ hạn', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Term_Margin_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'FX_Term_Margin_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Term_Margin_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Term_Margin_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_Term_Margin_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Term_Margin_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Term_Margin_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_PriceTableOrderInputBrand',N'FX - Xem bảng tỷ giá hối đoái', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTableOrderInputBrand'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_ConfigPriceTableOrderInputBrand',N'FX - Cấu hình tỷ giá hối đoái', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_ConfigPriceTableOrderInputBrand';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_ConfigPriceTableOrderInputBrand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_ConfigPriceTableOrderInputBrand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_ConfigPriceTableOrderInputBrand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_ConfigPriceTableOrderInputBrand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_ConfigPriceTableOrderInputBrand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_ConfigPriceTableOrderInputBrand'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_ConfigPriceTableOrderInputBrand') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_ConfigPriceTableOrderInputBrand') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_ConfigPriceTableOrderInputBrand'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'BaseSymbol_CreateUpdate',N'FX - Tạo/cập nhật cặp ngoại tệ', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Transaction_System_Curency_Config1',N'FX - Cấu hình ẩn/hiện cặp ngoại tệ', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Transaction_System_Curency_Config1';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Transaction_System_Curency_Config1') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Transaction_System_Curency_Config1') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Transaction_System_Curency_Config1'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Transaction_System_Curency_Config1') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Transaction_System_Curency_Config1') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Transaction_System_Curency_Config1'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'BaseSymbol_Format_Config',N'FX - Tham số thập phân tiền tệ', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Format_Config';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Format_Config') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Format_Config') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Format_Config'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Format_Config') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Format_Config') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Format_Config'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Format_Config') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Format_Config') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Format_Config'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_PriceTable_ViewBranch',N'FX - Xem bảng giá chi nhánh/Hội sở', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_PriceTable_ViewBranch'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_FX_Price_Table_Deadline_Branch',N'FX - Xem bảng giá chi nhánh kỳ hạn', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FX_Price_Table_Deadline_Branch'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ConfigOrderFx',N'FX - Cấu hình khớp lệnh FX', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFx';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFx'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFx') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFx') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFx'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ConfigOrderFW',N'FX - Cấu hình khớp lệnh Forward', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFW';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFW') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFW') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFW'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFW') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFW') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFW'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFW') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFW') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderFW'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ConfigOrderLimit',N'Cấu hình khớp lệnh ngoại tệ lạ', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderLimit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderLimit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderLimit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderLimit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderLimit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderLimit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderLimit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'System_ConfigFxNTNT',N'FX - Cấu hình khớp lệnh ngoại tệ nhập tay', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'System_ConfigFxNTNT'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ConfigOrderG10TraderConfirm',N'FX - Cấu hình khối lượng cần G10 trader xác nhận', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderG10TraderConfirm';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderG10TraderConfirm') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderG10TraderConfirm') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderG10TraderConfirm'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderG10TraderConfirm') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderG10TraderConfirm') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderG10TraderConfirm'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ConfigOrderUsdTraderConfirm',N'FX - Cấu hình khối lượng cần USD Trader xác nhận', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderUsdTraderConfirm';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderUsdTraderConfirm') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderUsdTraderConfirm') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderUsdTraderConfirm'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderUsdTraderConfirm') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderUsdTraderConfirm') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ConfigOrderUsdTraderConfirm'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_TransactionStatus_Branch_View',N'FX - Xem trạng thái giao dịch chi nhánh', '1', '0', GETDATE(), '209' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_Branch_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_TransactionStatus_HO_View',N'FX - Xem trạng thái giao dịch hệ thống', '1', '0', GETDATE(), '209' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionStatus_HO_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ReceivedEmail_Branch',N'Nhận mail thông báo giá giao dịch của chi nhánh', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Branch'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ReceivedEmail_Sale',N'Nhận mail thông báo giá giao dịch của HO', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Sale'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ReceivedEmail_Deal_Pending',N'Nhận mail thông báo giao dịch pending', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Pending'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_ReceivedEmail_Deal_Valudate',N'Nhận mail thông báo giao dịch đến hạn', '1', '0', GETDATE(), '200' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_ReceivedEmail_Deal_Valudate'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'LimitMarginPrice_Create',N'FX - Thiết lập giá của hạn mức biên độ giá', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'LimitMarginPrice_Create';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'LimitMarginPrice_Create') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'LimitMarginPrice_Create') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'LimitMarginPrice_Create'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'LimitMarginPrice_Create') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'LimitMarginPrice_Create') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'LimitMarginPrice_Create'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_Risk_Price_Trading_Limit_His_FX_View',N'FX - Xem lịch sử vi phạm hạn mức biên độ giá', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Risk_Price_Trading_Limit_His_FX_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'LimitMarginPrice_Update',N'FX - Thiết lập biên độ của hạn mức biên độ giá', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'LimitMarginPrice_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'LimitMarginPrice_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'LimitMarginPrice_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'LimitMarginPrice_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_Price_Trading_Limit_List_Margin_FX_View',N'FX - Thiết lập hạn mức biên độ margin', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List_Margin_FX_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List_Margin_FX_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List_Margin_FX_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List_Margin_FX_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List_Margin_FX_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List_Margin_FX_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Price_Trading_Limit_List_Margin_FX_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_Limit_His_Margin_FX_Key',N'FX - Xem lịch sử vi phạm hạn mức biên độ margin', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Limit_His_Margin_FX_Key'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Risk_Fx_UpdateMarginTradingLimit_Approval',N'FX - Phê duyệt HM biên độ Margin', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Fx_UpdateMarginTradingLimit_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Risk_Fx_UpdateMarginTradingLimit_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_Fx_UpdateMarginTradingLimit_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_Fx_UpdateMarginTradingLimit_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Risk_PositionTradingLimits_Create',N'FX - Thiết lập hạn mức trạng thái', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_PositionTradingLimits_Create';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Risk_PositionTradingLimits_Create') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_PositionTradingLimits_Create') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_PositionTradingLimits_Create'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Risk_PositionTradingLimits_Create') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Risk_PositionTradingLimits_Create') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Risk_PositionTradingLimits_Create'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_Position_Limit_History',N'FX - Xem lịch sử vi phạm hạn mức trạng thái', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Position_Limit_History'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_OffsetConfig_List',N'FX - Xem danh sách kênh thu bù', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_OffsetConfig_Add',N'FX - Tạo kênh thu bù', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Add';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Add'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Add') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Add') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Add'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'User_OffsetConfig_Update',N'FX - Cập nhật kênh thu bù', '1', '0', GETDATE(), '205' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'User_OffsetConfig_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Form_Fx_Order_Customer_Input_Detail_Menu',N'FX - Đặt lệnh chi nhánh', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Form_Fx_Order_Customer_Input_Detail_Menu_TSC',N'FX - Đặt lệnh hội sở', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu_TSC';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu_TSC') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu_TSC') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu_TSC'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu_TSC') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu_TSC') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu_TSC'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu_TSC') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu_TSC') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Form_Fx_Order_Customer_Input_Detail_Menu_TSC'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_TransactionAll_View',N'FX - Xem danh sách giao dịch tất cả lệnh', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionAll_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_GoldTrading_tabSymbol_Info_Edit',N'FX - Sửa hợp đồng', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_Fx_Trans_tabTTHT_Info_Edit',N'FX - Nhập hợp đồng', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_TabTransaction_AllowedBranchOrderGDReceived',N'FX - Nhận giao dịch', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedBranchOrderGDReceived'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan',N'FX - Sửa hạch toán', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_GoldTrading_tabSymbol_Info_Edit_HachToan'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan',N'FX - Nhập hạch toán', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Trans_tabTTHT_Info_Edit_HachToan'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_Trans_TabTransaction_AllowedReject',N'FX - Huỷ hạch toán', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Trans_TabTransaction_AllowedReject'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_EditRefClientOrderId',N'FX - Sửa mã lệnh tham chiếu', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_EditRefClientOrderId'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_TransactionWaitingCustomerInfo_Edit',N'FX - Sửa thông tin khách hàng', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_TransactionProcessTrade_View',N'FX - Sale xử lý lệnh delay trade', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_TabTransaction_AllowedReject',N'FX - Hủy giao dịch chi nhánh/hội sở', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TabTransaction_AllowedReject'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_TransactionDelete',N'FX - Hủy giao dịch chi nhánh', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionDelete';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionDelete') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionDelete') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionDelete'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionDelete') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionDelete') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionDelete'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionDelete') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionDelete') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionDelete'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_XAC_NHAN_HUY_LENH',N'FX - Treaops xác nhận hủy giao dịch', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_XAC_NHAN_HUY_LENH';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FX_XAC_NHAN_HUY_LENH') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_XAC_NHAN_HUY_LENH') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_XAC_NHAN_HUY_LENH'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_XAC_NHAN_HUY_LENH') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_XAC_NHAN_HUY_LENH') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_XAC_NHAN_HUY_LENH'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_BranchTransaction_View_List',N'FX - Xem danh sách phê duyệt giao dịch chi nhánh', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_BranchTransaction_View_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FX_BranchTransaction_View_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_BranchTransaction_View_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_BranchTransaction_View_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_AprrovalHT_View_List',N'FX - Phê duyệt hạch toán', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_AprrovalHT_View_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FX_AprrovalHT_View_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_AprrovalHT_View_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_AprrovalHT_View_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_AprrovalHT_Del_View_List',N'FX - Phê duyệt huỷ hạch toán', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_AprrovalHT_Del_View_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FX_AprrovalHT_Del_View_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_AprrovalHT_Del_View_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_AprrovalHT_Del_View_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_Order_Cancel',N'FX - Phê duyệt huỷ GD', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Order_Cancel';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FX_Order_Cancel') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_Order_Cancel') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_Order_Cancel'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_Fx_Transaction_List_Cancel_Approval',N'FX - Sale phê duyệt hủy', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_List_Cancel_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_List_Cancel_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_List_Cancel_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_List_Cancel_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_List_Cancel_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_List_Cancel_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_List_Cancel_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_Fx_Transaction_Trader_List_Cancel_Approval',N'FX - Trader phê duyệt hủy', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_Trader_List_Cancel_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_Trader_List_Cancel_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_Trader_List_Cancel_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_Trader_List_Cancel_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_Trader_List_Cancel_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_Trader_List_Cancel_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fx_Transaction_Trader_List_Cancel_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_TransactionReject_View',N'ALL - Báo cáo giao dịch đã huỷ', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionReject_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View',N'FX - Danh sách trader thỏa thuận', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Fx_TraderConfirmListOrder_TradingRequote_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListOrder_Fx_TradingRequote_Trader_Requote',N'FX - Thỏa thuận giá (Trader)', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Trader_Requote';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Trader_Requote') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Trader_Requote') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Trader_Requote'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Trader_Requote') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Trader_Requote') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Trader_Requote'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListOrder_Fx_TradingRequote_Sale_View',N'FX - Xem danh sách thỏa thuận giá (Sale )', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListOrder_Fx_TradingRequote_Sale_Requote',N'FX - Thỏa thuận giá (Sale)', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_Requote';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_Requote') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_Requote') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_Requote'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_Requote') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_Requote') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_Requote'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_Requote') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_Requote') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Fx_TradingRequote_Sale_Requote'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_TransactionSyn_View',N'FX - Xem danh sách đồng bộ giao dịch', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_TransactionSyn_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FX_SynsFT_Before_Approval',N'FX - Đồng bộ FT trước thời gian tự động phê duyệt bút toán', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_SynsFT_Before_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FX_SynsFT_Before_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FX_SynsFT_Before_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FX_SynsFT_Before_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_TransactionProcessTrade_Trader_View',N'FX - Trader xử lý lệnh delay trade', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_Trader_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_Trader_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_Trader_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_Trader_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_Trader_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_Trader_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionProcessTrade_Trader_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_TransactionImportFromExcel_Action',N'FX - Nhập lệnh từ file Excel', '1', '0', GETDATE(), '207' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionImportFromExcel_Action';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionImportFromExcel_Action') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionImportFromExcel_Action') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionImportFromExcel_Action'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionImportFromExcel_Action') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionImportFromExcel_Action') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionImportFromExcel_Action'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionImportFromExcel_Action') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionImportFromExcel_Action') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_TransactionImportFromExcel_Action'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Report_GoldStore_TransactionAll_View_FX',N'ALL - Báo cáo liệt kê giao dịch', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_GoldStore_TransactionAll_View_FX'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'BaoCaoChamChungTuView',N'ALL - Báo cáo chấm chứng từ', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'BaoCaoChamChungTuView_WB',N'FX - Xem báo cáo chấm chứng từ WB', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaoCaoChamChungTuView_WB'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Report_Pending',N'ALL - Báo cáo giao dịch pending', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Report_Pending') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Report_Pending'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_Report_ftCommit',N'FX - Xuất báo cáo danh sách FT chưa commit', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_ftCommit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_Report_Profit',N'FX - Xem báo cáo lợi nhuận', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.BAOCAO'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.BAOCAO') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.BAOCAO') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_Profit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_Report_usdSaleCus',N'FX - Xem báo cáo khối lượng quy đổi USD và lợi nhuận Sale theo khách hàng', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleCus'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_Report_usdSaleReg',N'FX - Xem báo cáo khối lượng quy đổi USD và lợi nhuận Sale theo vùng', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleReg'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_Report_usdSaleBran',N'FX - Xem báo cáo khối lượng quy đổi USD và lợi nhuận Sale theo chi nhánh', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_usdSaleBran'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_Report_saleCus',N'FX - Xem báo cáo lợi nhuận Sale và tiền tệ theo khách hàng', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleCus'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_Report_saleReg',N'FX - Xem báo cáo lợi nhuận Sale và tiền tệ theo vùng', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleReg'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_Report_saleBran',N'FX - Xem báo cáo lợi nhuận Sale và tiền tệ theo chi nhánh', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_saleBran'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_Report_typeTran',N'FX - Xem báo cáo loại giao dịch', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_typeTran'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fx_Report_treopDue',N'ALL - Báo cáo giao dịch đến hạn', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_TTQT') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_RM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fx_Report_treopDue'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FE_PriceTable_ViewBranch',N'FE - Xem bảng giá chi nhánh/Hội sở', '1', '0', GETDATE(), '206' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_PriceTable_ViewBranch'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListSysmbolPrice_Update_FE',N'FE - Cập nhật giá giao dịch', '1', '0', GETDATE(), '206' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Price_CostPrice_His_FE',N'FE - Xem lịch sử cập nhật giá giao dịch', '1', '0', GETDATE(), '206' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.BSM') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CostPrice_His_FE'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListSysmbolPrice_Update_FE_Approval',N'FE - Phê duyệt giá giao dịch', '1', '0', GETDATE(), '206' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListSysmbolPrice_Update_FE_Approval'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Price_Commission_Price_Exchange',N'FE - Thiết lập hoa hồng chi nhánh', '1', '0', GETDATE(), '206' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_Commission_Price_Exchange'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'BaseSymbol_Create_ListFE',N'FE - Xem danh sách mã giao dịch', '1', '0', GETDATE(), '206' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_Create_ListFE'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'BaseSymbol_CreateUpdate_Exchange',N'FE - Tạo/cập nhật cặp ngoại tệ', '1', '0', GETDATE(), '206' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'BaseSymbol_CreateUpdate_Exchange'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Price_HanMucBienDoGia_List_View',N'FE - Thiết lập giá của HM biên độ giá', '1', '0', GETDATE(), '206' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_List_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_List_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Price_HanMucBienDoGia_Update',N'FE - Thiết lập biên độ của HM biên độ giá', '1', '0', GETDATE(), '206' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_Update';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_Update'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_Update') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_Update') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_HanMucBienDoGia_Update'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Price_CauHinhKhopLenh_List_View',N'FE - Thiết lập hạn mức khối lượng tự động khớp', '1', '0', GETDATE(), '206' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Price_CauHinhKhopLenh_List_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'TDNT_Order_Customer_Input_Branch',N'FE - Đặt lệnh chi nhánh', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_Branch'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'TDNT_Order_Customer_Input_HO',N'FE - Đặt lệnh hội sở', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'TDNT_Order_Customer_Input_HO'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fe_tabTtht_SaveCancel',N'FE - Nhập hạch toán/hợp đồng hạch toán', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_SaveCancel'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fe_tabTtht_Info_Edit',N'FE - Sửa hạch toán/hợp đồng hạch toán', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_tabTtht_Info_Edit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FE_TransactionWaitingCustomerInfo_Edit',N'FE - Sửa thông tin khách hàng', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_TransactionWaitingCustomerInfo_Edit'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ExchangeTrans_Tab_HDHT_AllowedReject',N'FE - Hủy hạch toán/hợp đồng hạch toán', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ExchangeTrans_Tab_HDHT_AllowedReject'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Exchange_TabTransaction_AllowedReject',N'FE - Hủy giao dịch', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TabTransaction_AllowedReject'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'ListOrder_Exchange_TradingRequote_View',N'FE - Xem danh sách giao dịch chờ thỏa thuận', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'ListOrder_Exchange_TradingRequote_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Exchange_TradingRequote_View_Requote',N'FE - Thỏa thuận giá', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TradingRequote_View_Requote'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_FE_Branch_Order_List',N'FE - Nhận giao dịch', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_FE_Branch_Order_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Role_Fe_Transaction_Syn_List',N'FE – Xem danh sách đồng bộ giao dịch', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Role_Fe_Transaction_Syn_List'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Order_Fx_Order_TraderApprovalList_View',N'FE - Phê duyệt hạch toán/hợp đồng hạch toán', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Order_Fx_Order_TraderApprovalList_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Order_Fx_Order_TraderApprovalList_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Order_Fx_Order_TraderApprovalList_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Order_Fx_Order_TraderApprovalList_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Order_Fx_Order_TraderApprovalList_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Order_Fx_Order_TraderApprovalList_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Order_Fx_Order_TraderApprovalList_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FE_TabTransaction_ApprovalHuyGD',N'FE - Chi nhánh phê duyệt hủy giao dịch', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_TabTransaction_ApprovalHuyGD';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FE_TabTransaction_ApprovalHuyGD') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_TabTransaction_ApprovalHuyGD') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_TabTransaction_ApprovalHuyGD'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FE_TabTransaction_ApprovalHuyGD') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_TabTransaction_ApprovalHuyGD') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_TabTransaction_ApprovalHuyGD'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'FE_ApprovalEditThongTinKhachHang',N'FE - Phê duyệt sửa thông tin khách hàng', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_ApprovalEditThongTinKhachHang';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'FE_ApprovalEditThongTinKhachHang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_ApprovalEditThongTinKhachHang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_ApprovalEditThongTinKhachHang'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'FE_ApprovalEditThongTinKhachHang') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'FE_ApprovalEditThongTinKhachHang') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'FE_ApprovalEditThongTinKhachHang'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Order_Fx_Order_TraderApprovalList_Del',N'FE - Phê duyệt huỷ hạch toán/hợp đồng hạch toán', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Order_Fx_Order_TraderApprovalList_Del';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Order_Fx_Order_TraderApprovalList_Del') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Order_Fx_Order_TraderApprovalList_Del') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Order_Fx_Order_TraderApprovalList_Del'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Exchange_HO_ApprovalRejectList_view',N'FE - HO phê duyệt hủy giao dịch', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Exchange_HO_ApprovalRejectList_view'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Exchange_TransactionAll_View',N'FE - Xem danh sách giao dịch tất cả lệnh', '1', '0', GETDATE(), '208' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Exchange_TransactionAll_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fe_Report_exchangeBran',N'FE - Xem báo cáo liệt kê thu đổi ngoại tệ tại chi nhánh', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeBran'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fe_Report_exchangeHo',N'FE - Xem báo cáo liệt kê thu đổi ngoại tệ tại HO', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_exchangeHo'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'Fe_Report_businessBran',N'FE - Xem báo cáo lợi nhuận kinh doanh ngoại tệ mặt chi nhánh', '1', '0', GETDATE(), '204' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'Fe_Report_businessBran'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_Gold_Transaction_Branch_TDNT_HO_View',N'FE - Xem trạng thái giao dịch hệ thống', '1', '0', GETDATE(), '209' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALE') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_HO_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'App_Menu_Gold_Transaction_Branch_TDNT_View',N'FE - Xem trạng thái giao dịch chi nhánh', '1', '0', GETDATE(), '209' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.SALEMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KVH.TREAOPS.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.WBS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'App_Menu_Gold_Transaction_Branch_TDNT_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'DataPRovider_Gold_Transaction_Branch_View',N'Vàng - Xem trạng thái vàng giao dịch chi nhánh', '1', '0', GETDATE(), '209' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.SCN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNDN_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SnD.CNC_GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.GDV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.KSV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'SND.THUQUY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'WB.NHANLENH
(MMDVACIB)') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_Branch_View'));
INSERT INTO Role (Name, Description, Enable, ActorChanged, TimeChanged, RoleType) SELECT N'DataPRovider_Gold_Transaction_System_View',N'Vàng - Xem trạng thái vàng giao dịch hệ thống', '1', '0', GETDATE(), '209' WHERE NOT EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View';
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'KNV.TRADERMANAGER') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'QTRR.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'TCKH.TFC.CV') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'ADMIN') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.VHUD.READONLY') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.ITO.VHUD.OPS') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View'));
INSERT INTO RoleGroupRef (ActorChanged, IsPendingChange, RoleGroupId, RoleId, TimeChanged) SELECT '0', '0', (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH'), (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') , GETDATE() WHERE EXISTS (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND EXISTS (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View') AND NOT EXISTS (SELECT 1 FROM RoleGroupRef WHERE RoleGroupId = (SELECT RoleGroupId FROM RoleGroup WHERE Name = 'OT.DVKH') AND RoleId = (SELECT RoleId FROM Role WHERE Name = 'DataPRovider_Gold_Transaction_System_View'));
